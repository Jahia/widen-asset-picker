<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:osgi="http://www.eclipse.org/gemini/blueprint/schema/blueprint"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                http://www.eclipse.org/gemini/blueprint/schema/blueprint http://www.eclipse.org/gemini/blueprint/schema/blueprint/gemini-blueprint.xsd">

    <osgi:reference id="ExternalProviderInitializerService" interface="org.jahia.modules.external.ExternalProviderInitializerService"/>

    <bean class="org.jahia.ajax.gwt.helper.ModuleGWTResources">
        <property name="javascriptResources">
            <list>
                <value>/modules/widen-picker/javascript/edit-mode/widen-asset-picker.js</value>
            </list>
        </property>
    </bean>

    <bean id="widenAsset" class="org.jahia.services.uicomponents.bean.contentmanager.ManagerConfiguration">
        <property name="titleKey" value="label.widenAsset@resources.widen-picker"/>
        <property name="customPickerConfiguration">
            <bean class="org.jahia.ajax.gwt.client.widget.content.CustomPickerConfiguration">
                <property name="initMethodName" value="widenPickerInit"/>
                <property name="loadFieldValueMethodName" value="widenPickerLoad"/>
                <property name="getFieldValueFromPickerMethodName" value="widenPickerGet"/>
            </bean>
        </property>
    </bean>

    <bean id="WidenProvider" class="org.jahia.modules.external.ExternalContentStoreProvider" parent="AbstractJCRStoreProvider" >
        <property name="key" value="WidenProvider"/>
        <property name="mountPoint" value="/sites/systemsite/contents/widen"/>
        <property name="externalProviderInitializerService" ref="ExternalProviderInitializerService"/>
        <property name="extendableTypes">
            <list>
                <value>nt:base</value>
            </list>
        </property>
        <property name="dataSource" ref="WidenDataSource"/>
    </bean>

    <bean name="WidenDataSource" class="org.jahia.se.modules.widenprovider.WidenDataSource" init-method="start">
        <property name="cacheProvider" ref="ehCacheProvider"/>
        <property name="widenEndpoint" value="${jahia.widen.api.endPoint:api.widencollective.com}"/>
        <property name="widenSite" value="${jahia.widen.api.site:}"/>
        <property name="widenToken" value="${jahia.widen.api.token:}"/>
        <property name="widenVersion" value="${jahia.widen.api.version:v2}"/>
    </bean>

</beans>