{"version":3,"sources":["assets/loader_4.gif","contexts/index.js","components/SearchForm/SearchForm.jsx","components/Item/Item.jsx","misc/data.js","components/Paging/component/PageLink.jsx","components/Paging/component/Nav.jsx","components/Paging/component/NavXL.jsx","components/Paging/component/ResultPerPage.jsx","components/Paging/component/PageFormLink.jsx","misc/utils.js","components/Paging/component/Sort.jsx","components/Paging/Paging.jsx","components/App.js","misc/serviceWorker.js","components/Error/Ajv.jsx","douane/lib/schema/index.js","douane/index.js","components/Store/Store.jsx","index.js"],"names":["StoreContext","React","createContext","SearchForm","props","useContext","state","dispatch","isLoading","handleSubmit","e","a","preventDefault","case","Form","className","onSubmit","Group","controlId","InputGroup","Control","type","name","onChange","searchQuery","target","value","payload","placeholder","Append","Button","variant","disabled","onClick","icon","Text","ImageStats","properties","locale","Object","keys","reduce","reducer","key","width","height","aspect_ratio","toLocaleString","maximumFractionDigits","VideoStats","duration","title","dateObj","Date","hours","getUTCHours","toString","padStart","minutes","getUTCMinutes","seconds","getSeconds","formatDuration","ItemStats","format","format_type","size_in_kbytes","image_properties","video_properties","isImage","isVideo","isDocument","isPdf","formatFileSize","size","getFileFormatIcon","toLowerCase","Item","item","selectedItem","thumbnails","created_date","last_update_date","filename","id","file_properties","thumbnailURL","get","options","year","month","day","hour","minute","createdDate","toLocaleDateString","updatedDate","active","src","alt","paging","searchResultPerPage","offset","searchResultPageIndex","limit","sort","searchSortBy","searchSortByDirection","searchSortListDirection","filter","sortDirectionItem","symbol","fetchSearchData","path","widenEngine","params","query","expand","response","searchResults","error","PageLink","index","href","Nav","searchResultMaxPage","Array","map","i","NavXL","dotBefore","dotAfter","ResultPerPage","Prepend","as","defaultValue","nb","PageFormLink","useState","setIndex","useEffect","getRandomString","length","mask","indexOf","result","Math","floor","random","searchSortList","sortByItem","handleClickSortBy","sortBy","DropdownButton","alignRight","label","Dropdown","Paging","searchResultAvailableAnswersCount","showForm","Sort","library","add","faKiwiBird","faVideo","faImage","fab","faSearch","faPowerOff","faCheckCircle","faThumbsUp","faBan","faTimes","faUserCheck","faUserTag","faUserCircle","faAddressCard","faCrosshairs","faChevronLeft","faChevronRight","faHashtag","faEllipsisH","faFile","faFileAlt","faSyncAlt","faPaperPlane","faSortAmountDown","faSortAmountUp","faFilePdf","faFileImage","faFileVideo","Error","message","App","searchAnswers","needToFetch","searchFacets","_fetchData","Container","Row","Col","spinner","Boolean","window","location","hostname","match","Ajv","errors","dataPath","schema","context","description","widen","url","default","process","site","token","version","mountPoint","lazyLoad","JSON","parse","resultPerPage","Number","parseInt","required","additionalProperties","ajv","useDefaults","init","axios","create","baseURL","headers","Accept","Authorization","responseType","timeout","console","debug","widenPickerInterface","data","selectedId","isArray","split","slice","searchFilters","searchBanners","action","removeAll","items","total_count","ceil","facet","list","_filter","selected","splice","Store","useReducer","Provider","children","_context","_data","this","contextData","load","values","log","d","undefined","from","product","remove","endsWith","removeAt","widenPicker","validate","contextValidator","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.8e3d683f.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/loader_4.d2f7f41c.gif\";","import React from 'react';\n\nexport const StoreContext = React.createContext(null);\n","import React from 'react';\nimport {InputGroup,Form,Button} from 'react-bootstrap';\n\nimport {StoreContext} from \"contexts\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\n\nconst SearchForm = (props) => {\n    const { state, dispatch } = React.useContext(StoreContext);\n    const {\n        isLoading\n    } = state\n\n    const handleChange = (e) => {\n        const searchQuery= e.target.value;\n        //needed if I want to enable Fuzzy search\n        dispatch({\n            case:\"UPDATE_TEXT_QUERY\",\n            payload:{\n                searchQuery\n            }\n        });\n    }\n\n    const handleReset =(e) => {\n        //e.preventDefault();\n        dispatch({\n            case:\"RESET_TEXT_QUERY\"\n        });\n    }\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        dispatch({\n            case:\"EXECUTE_QUERY\"\n        });\n    }\n\n    return(\n        <Form className=\"pT4__form\" onSubmit={handleSubmit}>\n            <Form.Group controlId=\"basicSearch\">\n                {/*<Form.Label>Email address</Form.Label>*/}\n                <InputGroup className=\"mb-3\">\n                    <Form.Control\n                        type=\"text\"\n                        name=\"query\"\n                        // value={searchQuery}\n                        onChange={handleChange}\n                        placeholder=\"Que cherchez-vous ?\"\n                    />\n                    <InputGroup.Append>\n                        <Button type=\"reset\" variant=\"outline-secondary\" disabled={isLoading} onClick={handleReset}>\n                            <FontAwesomeIcon icon={['fas','times']}/>\n                        </Button>\n                    </InputGroup.Append>\n                    <InputGroup.Append>\n                        <Button type=\"submit\" variant=\"secondary\" disabled={isLoading}>\n                            <FontAwesomeIcon icon={['fas','search']}/>\n                        </Button>\n                    </InputGroup.Append>\n                </InputGroup>\n\n                <Form.Text className=\"text-muted\">\n                    <FontAwesomeIcon icon={['fas','power-off']}/> by\n                    Jahia For Widen\n                </Form.Text>\n            </Form.Group>\n        </Form>\n    );\n}\n\nSearchForm.propTypes={}\n\nexport default SearchForm;","import React from 'react';\nimport PropTypes from 'prop-types';\n// import {Card} from 'react-bootstrap';\nimport {StoreContext} from \"contexts\";\nimport get from \"lodash.get\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\n\n// const Decote=({discount,price}) => {\n//\n//     const { state } = React.useContext(StoreContext);\n//     const {locale} = state\n//\n//     const [dashedPrice] = price.map( prc => Number(prc));\n//     const formatedDashedPrice = new Intl.NumberFormat(locale, { style: 'currency', currency: 'EUR' }).format(dashedPrice);\n//\n//     const [discountNumber] = discount.map( discnt => Number(discnt));\n//     const formatedDiscount = new Intl.NumberFormat(locale, { style: 'percent'}).format(-Number(discountNumber)/100)\n//\n//\n//     return(\n//         <>\n//             <span className=\"bg-danger d-block text-white font-weight-bold\">{formatedDiscount}</span>\n//             <del className=\"text-muted small mr-3\">{formatedDashedPrice}</del>\n//         </>\n//     );\n// }\n//\n// Decote.propTypes={\n//     discount:PropTypes.array.isRequired,\n//     price:PropTypes.array.isRequired\n// }\nconst ImageStats = ({properties,locale}) => {\n    // console.log(\"[ImageStats] properties : \",properties);\n\n    //reduce is used to manage case {width = null} for svg image for example\n    //default value works only for undefined\n    const {\n        width,\n        height,\n        aspect_ratio\n    } = Object.keys(properties).reduce((reducer,key) => {\n        reducer[key]= properties[key] || 'n/a';\n        return reducer;\n    },{});\n\n\n// console.log(\"ImageStats width : \",width);\n    return(\n        <ul className=\"stats\">\n            <li>\n                <strong>Width</strong> {width.toLocaleString(locale)} px\n            </li>\n            <li>\n                <strong>Height</strong> {height.toLocaleString(locale)} px\n            </li>\n            <li>\n                <strong>Ratio</strong> {aspect_ratio.toLocaleString(locale,{maximumFractionDigits:2})}\n            </li>\n        </ul>\n    )\n}\n\nconst VideoStats = ({properties,locale}) => {\n    const {\n        width,\n        height,\n        aspect_ratio,\n        duration\n    } = Object.keys(properties).reduce((reducer,key) => {\n        reducer[key]= properties[key] || 'n/a';\n        return reducer;\n    },{});\n    const formatDuration = () => {\n        if(duration === 'n/a')\n            return 'n/a';\n\n        const dateObj = new Date(duration * 1000);\n        const hours = dateObj.getUTCHours().toString().padStart(2, '0');\n        const minutes = dateObj.getUTCMinutes().toString().padStart(2, '0');\n        const seconds = dateObj.getSeconds().toString().padStart(2, '0');\n\n        return `${hours}:${minutes}:${seconds}`;\n    }\n\n    return(\n        <>\n            <ul className=\"stats\">\n                <li title={`${width.toLocaleString(locale)} px`}>\n                    <strong>Width</strong> {width.toLocaleString(locale)} px\n                </li>\n                <li title={`${height.toLocaleString(locale)} px`}>\n                    <strong>Height</strong> {height.toLocaleString(locale)} px\n                </li>\n                <li>\n                    <strong>Ratio</strong> {aspect_ratio && aspect_ratio.toLocaleString(locale,{maximumFractionDigits:2})}\n                </li>\n            </ul>\n            <ul className=\"stats\">\n                <li className=\"w-100\">\n                    <strong>Duration</strong> {formatDuration()}\n                </li>\n            </ul>\n        </>\n    )\n}\n\n\nconst ItemStats = ({properties}) => {\n    // console.log(\"[ItemStats] properties : \",properties);\n    const _IMAGE_ = 'image';\n    const _VIDEO_ = 'video';\n    const _PDF_ = 'pdf';\n    const locale='fr-FR';\n\n    const {\n        format,\n        format_type,\n        size_in_kbytes,\n        image_properties,\n        video_properties\n    } = properties;\n    // console.log(\"properties : \",properties);\n    // console.log(\"image_properties : \",image_properties);\n\n    const isImage = format_type === _IMAGE_;\n    const isVideo = format_type === _VIDEO_;\n    const isDocument = !isImage && !isVideo;\n    const isPdf = format_type === _PDF_;\n\n    const formatFileSize = () => {\n        switch(true){\n            case size_in_kbytes > 1000000:\n                return `${(size_in_kbytes/1000000).toLocaleString(locale,{maximumFractionDigits:1})} GB`;\n            case size_in_kbytes > 1000:\n                return `${(size_in_kbytes/1000).toLocaleString(locale,{maximumFractionDigits:1})} MB`;\n            default :\n                return `${size_in_kbytes.toLocaleString(locale,{maximumFractionDigits:1})} KB`;\n        }\n    }\n\n    const getFileFormatIcon = () => {\n        const size = '1x';\n        switch(true){\n            case isImage :\n                return <FontAwesomeIcon icon={['fas','image']} size={size}/>//<FontAwesomeIcon icon={['far','file-image']} size={size}/>\n            case isVideo :\n                return <FontAwesomeIcon icon={['fas','video']} size={size}/>//<FontAwesomeIcon icon={['far','file-video']} size={size}/>\n            case isPdf:\n                return <FontAwesomeIcon icon={['far','file-pdf']} size={size}/>\n            default :\n                return <FontAwesomeIcon icon={['far','file']} size={size}/>\n        }\n    }\n\n    return(\n        <>\n            <ul className=\"stats\">\n                <li className=\"type\" title={format_type}>\n                    <strong>Type</strong>\n                    {getFileFormatIcon()}\n                </li>\n                <li title={format.toLowerCase()}>\n                    <strong>Format</strong>\n                    {format.toLowerCase()}\n                </li>\n                <li title={formatFileSize()}>\n                    <strong>Size</strong>\n                    {formatFileSize()}\n                </li>\n            </ul>\n            {isImage &&\n                <ImageStats properties={image_properties} locale={locale}/>\n            }\n            {isVideo &&\n                <VideoStats properties={video_properties} locale={locale}/>\n            }\n            {isDocument &&\n                <ul className=\"stats\">\n                    <li className=\"w-100\">\n                        {/*<strong></strong> <FontAwesomeIcon icon={['fas','kiwi-bird']} size=\"2x\"/>*/}\n                    </li>\n                </ul>\n            }\n        </>\n    );\n}\n\n\n\nconst Item=({item})=>{\n// console.log(\"[Item] item : \",item);\n    const { state,dispatch } = React.useContext(StoreContext);\n    const {selectedItem} = state //TODO locale is needed for the date format\n    const {thumbnails,created_date,last_update_date,filename,id,file_properties} = item;\n    const thumbnailURL = get(thumbnails,\"300px.url\",null);\n    // const url = get(embeds,\"templated.url\",null);\n\n    //const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\n    const options = { year: '2-digit', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit'};\n\n    let createdDate = new Date(created_date);\n    createdDate = createdDate.toLocaleDateString('fr-FR', options);\n\n    let updatedDate = new Date(last_update_date);\n    updatedDate = updatedDate.toLocaleDateString('fr-FR', options);\n\n    const active = selectedItem.id===id?\"active\":\"\";\n    const handleClick = () =>\n        dispatch({\n            case:\"UPDATE_SELECTED_ITEM\",\n            payload:{\n                id\n            }\n        });\n\n    return(\n        // <div className=\"col-lg-3 col-md-4 col-sm-6 col-xs-12\">\n            <div className={`card tile ${active}`} onClick={handleClick}>\n                <div className=\"wrapper\">\n\n                    <div className=\"banner-img\">\n                        <img src={thumbnailURL} alt={filename}/>\n                    </div>\n\n                    <div className=\"header\">{filename}</div>\n\n                    <div className=\"dates\">\n                        <div className=\"start\">\n                            <strong>Created</strong> {createdDate}\n                        </div>\n                        <div className=\"ends\">\n                            <strong>Updated</strong> {updatedDate}\n                        </div>\n                    </div>\n\n                    <ItemStats properties={file_properties}/>\n\n                    {/*<div className=\"footer\">*/}\n                    {/*    <a href=\"#\" className=\"Cbtn Cbtn-primary\">View</a>*/}\n                    {/*    <a href=\"#\" className=\"Cbtn Cbtn-danger\">Delete</a>*/}\n                    {/*</div>*/}\n                </div>\n            </div>\n        // </div>\n\n    )\n}\n\nItem.propTypes={\n    item:PropTypes.object.isRequired,\n}\n\nexport default Item;","import get from \"lodash.get\";\n\n// const computeSearchContext = ({searchContexts}) =>\n//     Object.keys(searchContexts).reduce((params, key) => {\n//         let value = searchContexts[key];\n//         if(key===\"segments\")\n//             value = value.replace(\" | \",\"|\");\n//\n//         if (value)\n//             params[`contexts[${key}]`] = value;//contexts[buyerProfile]=promotion\n//         return params;\n//     }, {});\n\n// const computeFacetContext = ({searchFacets}) =>\n//     searchFacets.reduce((params,facet) => {\n//         // console.log(\"[computeFilterContext] facet : \",facet);\n//         const filters = facet.list.reduce((params,filter)=>{\n//             // console.log(\"filter.id : \",filter.id)\n//             // console.log(\"filter.selected : \",filter.selected)\n//             if(filter.selected){\n//\n//                 params[`filters[${filter.type}][values][]`] = filter.filter;\n//                 params[`filters[${filter.type}][operations][]`]=\"and\"\n//             }\n//             return params;\n//         },{});\n//         // console.log(\"[computeFilterContext] filters : \",filters);\n//         return{\n//             ...params,\n//             ...filters\n//         }\n//     },{});\n\n// const computeFilterContext = ({searchFilters}) =>\n//     searchFilters.reduce((params,filter) => {\n//         // console.log(\"[computeFilterContext] facet : \",filter);\n//         params[`filters[${filter.id}][values][]`] = filter.value;\n//         params[`filters[${filter.id}][operations][]`]= filter.operation;\n//\n//         // console.log(\"[computeFilterContext] filters : \",filters);\n//         return params;\n//     },{});\n\n\nconst paging = ({searchResultPerPage,searchResultPageIndex}) => {\n    // console.log(\"[paging] searchResultPerPage: \",searchResultPerPage,\"; searchResultPageIndex : \",searchResultPageIndex)\n    return{\n        offset:(searchResultPageIndex-1)*searchResultPerPage,\n        limit:searchResultPerPage\n    };\n}\n\nconst sort = ({searchSortBy,searchSortByDirection,searchSortListDirection}) => {\n    const [sortDirectionItem] = searchSortListDirection.filter(item => item.value === searchSortByDirection);\n    return{\n        sort:`${sortDirectionItem.symbol}${searchSortBy}`\n    };\n\n}\n\nconst fetchSearchData = async ({path = \"/\",state,dispatch}) => {\n    const {\n        widenEngine,\n        searchQuery,\n        //searchContexts,\n        // searchFacets,\n        // searchFilters,\n        searchResultPerPage,\n        searchResultPageIndex,\n        searchSortBy,\n        searchSortByDirection,\n        searchSortListDirection\n    } = state;\n\n    dispatch({\n        case: \"LOADING\",\n        payload: {\n            value:true\n        }\n    });\n    // console.log(\"searchQuery : \",searchQuery);\n    const params = {\n        query:searchQuery,\n        expand:\"embeds,thumbnails,file_properties\",\n        // ...computeSearchContext({searchContexts}),\n        // ...computeFacetContext({searchFacets}),\n        // ...computeFilterContext({searchFilters}),\n        ...paging({searchResultPerPage,searchResultPageIndex}),\n        ...sort({searchSortBy,searchSortByDirection,searchSortListDirection})\n    }\n\n    // console.log(\"[fetchSearchData] params : \",params);\n\n    try {\n        //TODO test response.status===200 || 204? sinon throw Error(response.status)\n        const response = await widenEngine(path, {params})\n        dispatch({\n            case: \"UPDATE_SEARCH_RESULTS\",\n            payload: {\n                searchResults: get(response,\"data\",{})\n            }\n        });\n    }catch (error) {\n        dispatch({\n            case: \"ERROR\",\n            payload: {\n                error\n            }\n        });\n    }\n    dispatch({\n        case: \"LOADING\",\n        payload: {\n            value:false\n        }\n    });\n};\n\nexport {\n    fetchSearchData\n}","import React from 'react';\nimport {StoreContext} from \"contexts\";\n\nconst PageLink=({index}) =>{\n    const { state, dispatch } = React.useContext(StoreContext);\n    const {\n        searchResultPageIndex\n    } = state\n\n    const className = searchResultPageIndex===index ? \"active\" : \"\";\n\n    const handleGoToPage = (e) =>{\n        e.preventDefault();\n        dispatch({\n            case: \"GOTO_RESULT_PAGE\",\n            payload:{\n                index\n            }\n        });\n    }\n\n    return(\n        <li>\n            <a href=\"#\" className={className} onClick={handleGoToPage}>{index}</a>\n        </li>\n    )\n}\n\nexport default PageLink;","import React from 'react';\nimport {StoreContext} from \"contexts\";\nimport PageLink from \"./PageLink\";\n\nconst Nav=()=>{\n    const { state } = React.useContext(StoreContext);\n    const {\n        searchResultMaxPage\n    } = state\n\n    return (\n        <>\n            {[...Array(searchResultMaxPage)].map((e,i)=>\n                <PageLink key={i} index={i+1}/>\n            )}\n        </>\n\n    )\n}\n\nexport default Nav;","import React from 'react';\nimport {StoreContext} from \"contexts\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport PageLink from \"./PageLink\";\n\nconst NavXL=()=>{\n    const { state } = React.useContext(StoreContext);\n    const {\n        searchResultPageIndex,\n        searchResultMaxPage\n    } = state\n\n    const dotBefore = searchResultPageIndex > 3 ? true : false;\n    const dotAfter = searchResultMaxPage - searchResultPageIndex >2 ? true : false;\n\n\n    let paging;\n    switch(true){\n        case searchResultPageIndex <=2 :\n            paging = [2,3];\n            break;\n        case searchResultMaxPage - searchResultPageIndex >1:\n            paging = [searchResultPageIndex-1,searchResultPageIndex,searchResultPageIndex+1];\n            break;\n        case searchResultMaxPage - searchResultPageIndex === 1:\n            paging = [searchResultPageIndex-1,searchResultPageIndex];\n            break;\n        default:\n            paging = [searchResultPageIndex-2,searchResultPageIndex-1];\n            break;\n    }\n\n    return (\n        <>\n            <PageLink index={1}/>\n            {dotBefore &&\n                <li className=\"interlayer\" >\n                    <FontAwesomeIcon icon={['fas','ellipsis-h']}/>\n                </li>\n            }\n            {paging.map((e,i)=>\n                <PageLink key={i} index={e}/>\n            )}\n            {dotAfter &&\n                <li className=\"interlayer\">\n                    <FontAwesomeIcon icon={['fas','ellipsis-h']}/>\n                </li>\n            }\n            <PageLink index={searchResultMaxPage}/>\n        </>\n\n    )\n}\n\nexport default NavXL;","import React from 'react';\nimport {StoreContext} from \"contexts\";\nimport {Form, InputGroup} from \"react-bootstrap\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\n\nconst ResultPerPage=() =>{\n    const { state,dispatch } = React.useContext(StoreContext);\n    const {\n        searchResultPerPage\n    } = state\n\n    const handleChange = (e) => {\n        dispatch({\n            case: \"UPDATE_RESULT_PER_PAGE\",\n            payload:{\n                value:e.target.value\n            }\n        });\n    }\n\n    return(\n        <li>\n            <InputGroup>\n                <InputGroup.Prepend>\n                    <InputGroup.Text id=\"inputGroupPrepend\">\n                        {/*<FontAwesomeIcon icon={['fas','file']}/>*/}\n                        <FontAwesomeIcon icon={['far','file-alt']}/>\n                    </InputGroup.Text>\n                </InputGroup.Prepend>\n                <Form.Control\n                    as=\"select\"\n                    defaultValue={searchResultPerPage}\n                    onChange={handleChange}\n                    title=\"Result per page\"\n                >\n                    {[5,10,20,50,100].map( nb => <option key={nb} value={nb}>{nb}</option>)}\n                </Form.Control>\n                {/*<InputGroup.Append>*/}\n                {/*    <InputGroup.Text id=\"inputGroupPrepend\">*/}\n                {/*        /!*<FontAwesomeIcon icon={['fas','file']}/>*!/*/}\n                {/*        <FontAwesomeIcon icon={['far','file-alt']}/>*/}\n                {/*    </InputGroup.Text>*/}\n                {/*</InputGroup.Append>*/}\n            </InputGroup>\n        </li>\n    )\n}\n\nexport default ResultPerPage;","import React from 'react';\nimport {StoreContext} from \"contexts\";\nimport {Button, Form, InputGroup} from \"react-bootstrap\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\n\nconst PageFormLink=() =>{\n    const { state,dispatch } = React.useContext(StoreContext);\n    const {\n        isLoading,\n        searchResultPageIndex,\n        searchResultMaxPage\n    } = state\n\n    const[index,setIndex] = React.useState(searchResultPageIndex);\n\n    React.useEffect( () =>{\n        setIndex(searchResultPageIndex);\n    },[searchResultPageIndex])\n\n    const handleChange = (e) => {\n        setIndex(e.target.value);\n    }\n\n    const handleGoToPage = (e) =>{\n        e.preventDefault();\n\n        if(searchResultMaxPage<index)\n            return;\n\n        dispatch({\n            case: \"GOTO_RESULT_PAGE\",\n            payload:{\n                index\n            }\n        });\n    }\n\n\n    return(\n        <li>\n            <Form className=\"pT4__form-goto\" onSubmit={handleGoToPage}>\n                <InputGroup>\n                    <InputGroup.Prepend>\n                        <InputGroup.Text id=\"inputGroupPrepend\">\n                            {/*<FontAwesomeIcon icon={['fas','file']}/>*/}\n                            <FontAwesomeIcon icon={['far','paper-plane']}/>\n                        </InputGroup.Text>\n                    </InputGroup.Prepend>\n                    <Form.Control\n                        type=\"text\"\n                        name=\"paging\"\n                        value={index}\n                        onChange={handleChange}\n                        title=\"Goto Page\"\n                    />\n                    <InputGroup.Append>\n                        <Button type=\"submit\" variant=\"outline-secondary\" disabled={isLoading}>\n                            <FontAwesomeIcon icon={['fas','sync-alt']}/>\n                        </Button>\n                    </InputGroup.Append>\n                </InputGroup>\n            </Form>\n        </li>\n    )\n}\n\nexport default PageFormLink;","\nconst _WEAKREFERENCE_ = \"WEAKREFERENCE\";\n//TODO voir si avec SDL je peux passe l'URL des images!\nfunction getProperties(properties,context){\n    if(!properties) return;\n    return properties.reduce(function(bundle,property){\n        const key = property.name.split(\":\").pop();\n        let value = property.value || property.values;\n// console.log(\"property : \",property);\n        if(property.type === _WEAKREFERENCE_ &&\n            property.weakreference &&\n            property.weakreference.path\n        ){\n            property.weakreference.url=\n                `${context.files_endpoint}${encodeURI(property.weakreference.path)}`;\n            value = property.weakreference;\n        }\n\n        bundle[key]=value;\n        return bundle;\n    },{});\n};\n\n// function getWeakURL(filesEndpoint,nodePath){\n//     return `${filesEndpoint}${encodeURI(nodePath)}`;///encodeURIComponent()\n// };\n\nfunction getRandomString (length, format){\n    let mask = \"\";\n    if (format.indexOf(\"a\") > -1) mask += \"abcdefghijklmnopqrstuvwxyz\";\n    if (format.indexOf(\"A\") > -1) mask += \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n    if (format.indexOf(\"#\") > -1) mask += \"0123456789\";\n    if (format.indexOf(\"!\") > -1) mask += \"~`!@#$%^&*()_+-={}[]:\\\";'<>?,./|\\\\\";\n    let result = \"\";\n    for (let i = length; i > 0; --i) result += mask[Math.floor(Math.random() * mask.length)];\n    return result;\n};\n\nfunction getGQLWorkspace(workspace){\n    return workspace===\"default\"?\n        \"EDIT\":\n        workspace.toUpperCase()\n}\n\nexport {\n    getProperties,\n    getRandomString,\n    getGQLWorkspace\n}","import React from 'react';\nimport {StoreContext} from \"contexts\";\nimport {Dropdown,DropdownButton,Button} from 'react-bootstrap';\nimport {getRandomString} from \"misc/utils\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\n\nconst Nav=()=>{\n    const { state, dispatch } = React.useContext(StoreContext);\n    const {\n        searchSortBy,\n        searchSortByDirection,\n        searchSortList,\n        searchSortListDirection,\n    } = state\n    const [sortByItem] = searchSortList.filter(item => item.value===searchSortBy);\n    const [sortDirectionItem] = searchSortListDirection.filter(item => item.value === searchSortByDirection);\n\n    const handleClickSortBy = (e) =>{\n        const sortBy = e.target.id;\n        dispatch({\n            case:\"UPDATE_SORT_ITEM\",\n            payload:{\n                sortBy\n            }\n        });\n    };\n\n    const handleClickSortByDirection = (e) =>\n        dispatch({\n            case:\"TOGGLE_SORT_DIRECTION\"\n        });\n\n    return (\n        <>\n            <li>\n                <DropdownButton\n                    alignRight\n                    variant=\"outline-dark\"\n                    title={`Sort by ${sortByItem.label}`}\n                    id={`sortBy_${getRandomString(6,\"aA#\")}`}\n                >\n                    {searchSortList.map((item,i)=>\n                        <Dropdown.Item key={i} id={item.value} onClick={handleClickSortBy}>{item.label}</Dropdown.Item>\n                    )}\n                    {/*<Dropdown.Divider />*/}\n                </DropdownButton>\n            </li>\n            <li>\n                <Button\n                    variant=\"outline-dark\"\n                    onClick={handleClickSortByDirection}\n                >\n                    <FontAwesomeIcon icon={['fas',sortDirectionItem.label]}/>\n                </Button>\n            </li>\n        </>\n    )\n}\n\nexport default Nav;","import React from 'react';\n\nimport {StoreContext} from \"contexts\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport Nav from \"./component/Nav\";\nimport NavXL from \"./component/NavXL\";\nimport ResultPerPage from \"components/Paging/component/ResultPerPage\";\nimport PageFormLink from \"components/Paging/component/PageFormLink\";\nimport Sort from \"components/Paging/component/Sort\";\n\nconst Paging=(props)=>{\n\n    const { state,dispatch } = React.useContext(StoreContext);\n    const {\n        searchResultMaxPage,\n        searchResultAvailableAnswersCount\n    } = state\n\n    //TODO think about this\n    const showForm = searchResultMaxPage > 10;\n\n    if(!searchResultMaxPage)\n        return(<></>);\n\n    const handlePrev = (e) =>{\n        e.preventDefault();\n        dispatch({\n            case: \"PREVIOUS_RESULT_PAGE\"\n        });\n    }\n\n\n    const handleNext = (e) =>{\n        e.preventDefault();\n        dispatch({\n            case: \"NEXT_RESULT_PAGE\"\n        });\n    }\n\n    return(\n        <>\n            <ul className=\"pT4__paging results\">\n                <li className=\"results\">\n                    {/*<FontAwesomeIcon icon={['fas','hashtag']}/>*/}\n                    <h6>Résultats : {searchResultAvailableAnswersCount}</h6>\n                </li>\n                <Sort/>\n                <ResultPerPage/>\n\n                {showForm &&\n                <PageFormLink/>\n                }\n            </ul>\n            <ul className=\"pT4__paging\">\n                <li className=\"nav\">\n                    <a href=\"#\" onClick={handlePrev}>\n                        <FontAwesomeIcon icon={['fas','chevron-left']} />\n                    </a>\n                </li>\n\n                {searchResultMaxPage <=5 &&\n                <Nav/>\n                }\n\n                {searchResultMaxPage > 5 &&\n                <NavXL/>\n                }\n\n                <li className=\"nav\">\n                    <a href=\"#\" onClick={handleNext}>\n                        <FontAwesomeIcon icon={['fas','chevron-right']} />\n                    </a>\n                </li>\n            </ul>\n        </>\n\n    )\n}\n\nPaging.propTypes={}\n\nexport default Paging;","import React from 'react';\n\nimport spinner from \"assets/loader_4.gif\";\nimport 'components/App.scss';\nimport {Row, Container,Col} from \"react-bootstrap\";\n\nimport {StoreContext} from \"contexts\";\nimport SearchForm from \"components/SearchForm\";\nimport Item from \"components/Item\";\n// import Facet from \"components/Facet\";\nimport {fetchSearchData} from \"misc/data\";\n// import CurrentFilter from \"components/CurrentFilter\";\nimport Paging from \"components/Paging\";\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport { fab } from '@fortawesome/free-brands-svg-icons';\nimport {\n    faVideo,\n    faImage,\n    faSortAmountDown,\n    faSortAmountUp,\n    faSyncAlt,\n    faSearch,\n    faKiwiBird,\n    faPowerOff,faBan,faTimes,faUserCheck,faUserTag,faCrosshairs,faChevronLeft,faChevronRight,faHashtag,faEllipsisH } from '@fortawesome/free-solid-svg-icons';\nimport { faPaperPlane,faFileAlt,faCheckCircle,faThumbsUp,faUserCircle,faAddressCard,faFilePdf,faFileImage,faFileVideo,faFile} from '@fortawesome/free-regular-svg-icons';\n\nlibrary.add(\n    faKiwiBird,\n    faVideo,\n    faImage,\n    fab,\n    faSearch,\n    faPowerOff,\n    faCheckCircle,\n    faThumbsUp,\n    faBan,\n    faTimes,\n    faUserCheck,\n    faUserTag,\n    faUserCircle,\n    faAddressCard,\n    faCrosshairs,\n    faChevronLeft,\n    faChevronRight,\n    faHashtag,\n    faEllipsisH,\n    faFile,\n    faFileAlt,\n    faSyncAlt,\n    faPaperPlane,\n    faSortAmountDown,\n    faSortAmountUp,\n    faFilePdf,\n    faFileImage,\n    faFileVideo,\n    faFile\n);\n\nconst errorMsg = 'Oups something get wrong';\nconst Error= ({e}) => {\n    return(\n        <>\n            <h1>{errorMsg}</h1>\n            <p>{e.message}</p>\n        </>\n    );\n}\n\nconst App = (props) => {\n    const {state, dispatch} = React.useContext(StoreContext);\n    const {\n        error,\n        isLoading,\n        searchAnswers,\n        searchFacets,\n        needToFetch\n    } = state;\n\n    React.useEffect(() => {\n\n        // console.log(\"[APP] needToFetch : \",needToFetch);\n\n        const _fetchData = async () =>\n            await fetchSearchData({\n                path: \"/assets/search\",\n                state,\n                dispatch\n            });\n\n        if (needToFetch)\n            _fetchData();\n\n    }, [needToFetch])\n\n    if (error) return <Error e={error}/>;\n\n    return (\n        <Container className=\"pT4\">\n            <Row>\n                <Col>\n                    <SearchForm/>\n                    {/*<CurrentFilter/>*/}\n                    <Paging/>\n                </Col>\n            </Row>\n            <Row>\n                <Col>\n                    {isLoading &&\n                    <img className=\"pT4__spinner\" src={spinner}/>\n                    }\n                    {!isLoading &&\n                    <div className={`pT4__result ${isLoading ? \"\" : \"fade-in\"}`}>\n                        {\n                            searchAnswers.map(item =>\n                                <Item\n                                    key={item.id}\n                                    item={item}\n                                    locale={state.locale}\n                                />\n                            )\n                        }\n                    </div>\n                        // searchIframe &&\n                        // <iframe frameBorder=\"0\" src={searchIframe} width=\"100%\" height=\"700px\"></iframe>\n                    }\n                </Col>\n                {/*<Col xs=\"4\" sm=\"3\" md=\"4\" lg=\"3\">*/}\n                    {/*<ul className=\"pT4__facet\">*/}\n                    {/*    {searchFacets.map( facet =>*/}\n                    {/*        <Facet*/}\n                    {/*            key={facet.id}*/}\n                    {/*            facet={facet}*/}\n                    {/*        />*/}\n                    {/*    )*/}\n                    {/*    }*/}\n                    {/*</ul>*/}\n                {/*</Col>*/}\n            </Row>\n        </Container>\n    );\n}\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport PropTypes from \"prop-types\";\n\nconst Ajv = ({item,errors})=> {\n    return(\n        <div>\n            <h1>Validation errors</h1>\n            <p>An error occurred when validating <b>{item}</b></p>\n            <ul>\n                {errors.map( (error,i) =>\n                    <li>\n                        {error.dataPath} : {error.message}\n                    </li>)\n                }\n            </ul>\n        </div>\n    )\n}\n\nAjv.propTypes={\n    item:PropTypes.string.isRequired,\n    errors:PropTypes.array.isRequired\n};\n\nexport default Ajv;","const schema = {\n    context:{\n        title:\"context validation schema \",\n        description:\"context is an object provided by the page in charge to load the app\",\n        type:\"object\",\n        properties:{\n            widen:{\n                type:\"object\",\n                properties:{\n                    url:{\n                        type:\"string\",\n                        format:\"uri\",\n                        default:process.env.REACT_APP_WIDEN_ENDPOINT //could be null in case of edit!\n                    },\n                    site:{\n                        type:\"string\",\n                        default:process.env.REACT_APP_WIDEN_SITE\n                    },\n                    token:{\n                        type:\"string\",\n                        default:process.env.REACT_APP_WIDEN_TOKEN\n                    },\n                    version:{\n                        type:\"string\",\n                        default:process.env.REACT_APP_WIDEN_VERSION\n                    },\n                    mountPoint:{\n                        type:\"string\",\n                        default:process.env.REACT_APP_WIDEN_MOUNT_POINT\n                    },\n                    lazyLoad:{\n                        type:\"boolean\",\n                        default:JSON.parse(process.env.REACT_APP_WIDEN_LAZY_LOAD)\n                    },\n                    resultPerPage:{\n                        type:\"integer\",\n                        default:Number.parseInt(process.env.REACT_APP_WIDEN_RESULT_PER_PAGE, 10)\n                    }\n                    //\"fr\" or \"fr-FR\" TODO voir si je suis permissif et accpete 'fr'\n                    // locale:{\n                    //     type:\"object\",\n                    //     properties:{\n                    //         user:{\n                    //             type:\"string\",\n                    //             pattern:\"^[a-z]{2}$\",//\"[a-z]{2}(?:-[A-Z]{2})?\"\n                    //             default:process.env.REACT_APP_WIDEN_USER_LOCALE\n                    //         },\n                    //         search:{\n                    //             type:\"string\",\n                    //             pattern:\"^[a-z]{2}-[A-Z]{2}$\",\n                    //             default:process.env.REACT_APP_WIDEN_SEARCH_LOCALE\n                    //         }\n                    //     },\n                    //     required: [\"user\", \"search\"],\n                    //     additionalProperties:false\n                    //\n                    // },\n                },\n                required: [\"url\", \"site\",\"token\",\"version\",\"lazyLoad\",\"resultPerPage\",\"mountPoint\"],//,\"locale\"\n                additionalProperties:false\n            },\n        },\n        required: [\n            \"widen\",\n        ],\n        additionalProperties:false\n    }\n}\n\nexport default schema;","import * as Ajv from \"ajv\";\nimport schema from \"douane/lib/schema\";\n// import {getGQLWorkspace} from \"misc/utils\";\n\nconst ajv = new Ajv({useDefaults:true});\n//TODO le try catch doit etre fait ici et un component react doit etre retourne\nconst contextValidator = (context) =>{\n\n    const valid = ajv.validate(schema.context, context);\n    if (!valid)\n        // throw new Error(`An error occurred during the validation of context object, errors : ${JSON.stringify(ajv.errors)}`);\n        throw {item:\"Context configuration object\",errors:ajv.errors};\n    // context.gql_variables.workspace = getGQLWorkspace(context.workspace);\n    return context;\n}\n\nexport {\n    contextValidator\n}","import React from \"react\";\nimport {StoreContext} from \"contexts\";\nimport axios from \"axios\";\n\nconst init = context => {\n    const widenEngine = axios.create({\n        baseURL:`${context.widen.url}/${context.widen.version}`,\n        headers:{\n            \"Content-Type\":\"application/json\",\n            Accept:\"application/json\",\n            Authorization:`Bearer ${context.widen.site}/${context.widen.token}`\n        },\n        responseType:\"json\",\n        timeout:10000\n    });\n\n    const {lazyLoad,resultPerPage,mountPoint} = context.widen;\n    console.debug(\"[STORE INIT] window.widenPickerInterface.data : \", window.widenPickerInterface.data)\n    const selectedId = Array.isArray(window.widenPickerInterface.data) && window.widenPickerInterface.data.length >=1 ?\n        window.widenPickerInterface.data[0].split(\"/\").slice(-1)[0]:null;\n    return {\n        context,\n        //locale:context.widen.locale.search,\n        error:null,\n        isLoading:false,\n        needToFetch:!lazyLoad,//false,\n        selectedItem:selectedId?{id:selectedId}:{},\n        widenEngine,\n        mountPoint,\n        searchAnswers:[],\n        searchSortBy:\"created_date\",\n        searchSortByDirection:\"DESC\",\n        searchSortList:[\n            {value:\"created_date\",label:\"Date Added\"},\n            {value:\"last_update_date\",label:\"Date Updated\"},\n            {value:\"filename\",label:\"Filename\"},\n            {value:\"file_format\",label:\"File Format\"},\n            {value:\"file_size\",label:\"File Size\"},\n\n        ],\n        searchSortListDirection:[\n            {value:\"ASC\",label:\"sort-amount-up\",symbol:\"\"},\n            {value:\"DESC\",label:\"sort-amount-down\",symbol:\"-\"}],\n        searchQuery:null,\n        searchFacets:[],\n        searchFilters:[],\n        searchBanners:[],\n        searchResultPerPage:Number.parseInt(resultPerPage,10),//be sure it is an integer base 10\n        searchResultMaxPage:null,\n        searchResultPageIndex:1,\n        searchResultAvailableAnswersCount:null\n    }\n}\n\nconst reducer = (state, action) => {\n    const { payload } = action;\n\n    switch (action.case) {\n        case \"UPDATE_TEXT_QUERY\": {\n            console.debug(\"[STORE] UPDATE_TEXT_QUERY - query: \",payload.searchQuery);\n            return {\n                ...state,\n                searchQuery:payload.searchQuery\n            }\n        }\n        case \"RESET_TEXT_QUERY\": {\n            console.debug(\"[STORE] RESET_TEXT_QUERY\");\n            return {\n                ...state,\n                searchQuery:\"\",\n                needToFetch:true\n            }\n        }\n        case \"EXECUTE_QUERY\": {\n            console.debug(\"[STORE] EXECUTE_QUERY\");\n            return {\n                ...state,\n                searchResultPageIndex:1,//new search reset paging\n                needToFetch:true\n            }\n        }\n        case \"UPDATE_SELECTED_ITEM\": {\n            const {id} = payload;\n            // const {graphQLEngine,mountPoint} = state\n            console.debug(\"[STORE] UPDATE_SELECTED_ITEM - payload: \",payload);\n\n            // console.log(\"[STORE] UPDATE_SELECTED_ITEM - window.widenPickerInterface: \",window.widenPickerInterface);\n            window.widenPickerInterface.removeAll();\n            window.widenPickerInterface.add(`${state.mountPoint}/${id}`);\n            // console.log(\"[STORE] UPDATE_SELECTED_ITEM - window.widenPickerInterface.data: \",window.widenPickerInterface.data);\n\n            return {\n                ...state,\n                selectedItem:payload\n            };\n        }\n        case \"UPDATE_SEARCH_RESULTS\": {\n            console.debug(\"[STORE] UPDATE_SEARCH_RESULTS - searchResults: \",payload.searchResults);\n            //sort,start_answer\n            const {items,total_count} = payload.searchResults\n            const {searchResultPerPage,searchResultPageIndex} = state;\n            let {searchResultMaxPage} = state;\n            const searchResultAvailableAnswersCount = total_count;\n\n\n            //new search\n            if(searchResultPageIndex === 1)\n                searchResultMaxPage =Math.ceil(searchResultAvailableAnswersCount/searchResultPerPage);\n\n            return {\n                ...state,\n                searchAnswers:items,\n                searchResultAvailableAnswersCount,\n                searchResultMaxPage,\n                needToFetch:false\n            };\n        }\n        case \"TOGGLE_FILTER\": {\n            const {filter} = payload;//fitler is an element of  widen.catalogs.list\n            console.debug(\"[STORE] TOGGLE_ANSWER -> filter id :\",filter.id);\n\n            let [facet,index] = state.searchFacets.reduce((result,facet,index)=>{\n                if(facet.id === filter.type)\n                    result = [facet,index];\n                return result;\n            },[]);\n\n            const list = facet.list.map(_filter => {\n                if(_filter.id === filter.id)\n                    return {\n                        ..._filter,\n                        selected:!_filter.selected\n                    };\n                return _filter;\n            });\n\n            facet = {\n                ...facet,\n                list\n            }\n\n            const searchFacets = state.searchFacets.slice();\n            searchFacets.splice(index, 1,facet);\n\n            console.debug(\"[STORE] searchFacets :\",searchFacets);\n\n            return {\n                ...state,\n                searchFacets,\n                searchResultPageIndex:1,//new search reset paging\n                needToFetch:true\n            };\n        }\n        case \"REMOVE_FILTER\": {\n            const {filter} = payload;//fitler is an element of  widen.filters\n            console.debug(\"[STORE] REMOVE_FILTER -> filter id :\",filter.id);\n\n            const searchFacets = state.searchFacets.filter( facet => facet.id !== filter.id);\n            // searchFacets.splice(index, 1,facet);\n\n            console.debug(\"[STORE] searchFacets :\",searchFacets);\n            //#2 remove for existing filters\n            const searchFilters = state.searchFilters.filter(_filter => _filter.id !== filter.id);\n\n            return {\n                ...state,\n                searchFacets,\n                searchFilters,\n                searchResultPageIndex:1,//new search reset paging\n                needToFetch:true\n            };\n        }\n        case \"ERROR\": {\n            console.debug(\"[STORE] ERROR - searchResults: \",payload.error);\n            return {\n                ...state,\n                error:payload.error\n            };\n        }\n        case \"LOADING\": {\n            console.debug(\"[STORE] LOADING - value: \",payload.value);\n            return {\n                ...state,\n                isLoading:payload.value\n            };\n        }\n        case \"PREVIOUS_RESULT_PAGE\": {\n            console.debug(\"[STORE] PREVIOUS_RESULT_PAGE\");\n\n            if(state.searchResultPageIndex <= 1)\n                return {\n                ...state\n            }\n\n            const searchResultPageIndex = state.searchResultPageIndex -1;\n\n            return {\n                ...state,\n                needToFetch:true,\n                searchResultPageIndex\n            };\n        }\n        case \"NEXT_RESULT_PAGE\": {\n            console.debug(\"[STORE] NEXT_RESULT_PAGE\");\n            const {searchResultMaxPage} = state;\n\n            if(state.searchResultPageIndex >= searchResultMaxPage)\n                return {\n                    ...state\n                }\n\n            const searchResultPageIndex = state.searchResultPageIndex +1;\n\n            return {\n                ...state,\n                needToFetch:true,\n                searchResultPageIndex\n            };\n        }\n        case \"GOTO_RESULT_PAGE\": {\n            console.debug(\"[STORE] GOTO_RESULT_PAGE payload : \",payload);\n            const index = Number(payload.index);\n            const {searchResultMaxPage} = state;\n\n            if(!index || index < 1 || index > searchResultMaxPage)\n                return {\n                    ...state\n                }\n\n            return {\n                ...state,\n                needToFetch:true,\n                searchResultPageIndex:index\n            };\n        }\n        case \"UPDATE_RESULT_PER_PAGE\": {\n            console.debug(\"[STORE] UPDATE_RESULT_PER_PAGE payload : \",payload);\n            const {value} = payload;\n\n            return {\n                ...state,\n                searchResultPerPage:value,\n                searchResultPageIndex:1,\n                needToFetch:true\n            };\n        }\n        case \"UPDATE_SORT_ITEM\": {\n            console.debug(\"[STORE] UPDATE_SORT_ITEM payload : \",payload);\n            const {sortBy} = payload;\n\n            return {\n                ...state,\n                searchSortBy:sortBy,\n                needToFetch:true\n            };\n        }\n        case \"TOGGLE_SORT_DIRECTION\": {\n            console.debug(\"[STORE] TOGGLE_SORT_DIRECTION\");\n            const {searchSortByDirection,searchSortListDirection} = state;\n            const [sortDirectionItem] = searchSortListDirection.filter(item => item.value != searchSortByDirection);\n\n            return {\n                ...state,\n                searchSortByDirection:sortDirectionItem.value,\n                needToFetch:true\n            };\n        }\n        default:\n            return {\n                ...state,\n                error:new Error(`[STORE] action case '${action.case}' is unknown `)\n            };\n            // throw new Error(`[STORE] action case '${action.case}' is unknown `);\n    };\n}\n\nexport const Store = props => {\n    const [state, dispatch] = React.useReducer(\n        reducer,\n        props.context,\n        init\n    );\n    return (\n        <StoreContext.Provider value={{ state, dispatch }}>\n            {props.children}\n        </StoreContext.Provider>\n    );\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from 'components/App';\nimport * as serviceWorker from 'misc/serviceWorker';\n\nimport AjvError from \"components/Error/Ajv\";\nimport {contextValidator} from \"douane\";\nimport {Store} from \"components/Store\";\n\nconst widenPickerInterface = {\n    _context: {},\n    _data: [],\n\n    get context() {\n        return this._context;\n    },\n    get data(){\n        return this._data;\n    },\n\n    set context(contextData) {\n        this._context = contextData;\n    },\n\n    set data(data){\n        this._data = data;\n    },\n\n    load: function (values) {\n        console.log(values.d);\n        if (values.d !== undefined && Array.isArray(values.d)) {\n            widenPickerInterface.data = Array.from(values.d);\n        }\n    },\n\n    add: function (path, product) {\n        this.data = [...this.data,path];\n        return this.data;\n    },\n\n    remove: function (path) {\n        this.data = this.data.filter( item => !item.endsWith(path) );\n    },\n\n    removeAt: function (index) {\n        if(index !== -1) {\n            this.data = this.data.splice(index, 1);\n            return this.data;\n        }\n        return null;\n    },\n\n    removeAll: function () {\n        widenPickerInterface.data = [];\n    }\n};\n\nconst render = (target,context) =>{\n    try{\n        // console.log(\"context : \",JSON.stringify(context));\n        context = contextValidator(context);\n\n        ReactDOM.render(\n            <Store context={context}>\n                <App />\n            </Store>,\n            document.getElementById(target)\n        );\n\n        // ReactDOM.render(\n        //     <React.StrictMode>\n        //         <Store context={context}>\n        //             <App />\n        //         </Store>\n        //     </React.StrictMode>,\n        //     document.getElementById(target)\n        // );\n\n    }catch(e){\n        console.error(\"error : \",e);\n        //TODO create a generic error handler\n        ReactDOM.render(\n            <AjvError\n                item={e.item}\n                errors={e.errors}\n            />,\n            document.getElementById(target)\n        );\n    }\n}\n\nwindow.widenPicker = render;\nwindow.widenPickerInterface = widenPickerInterface;\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}