{"version":3,"sources":["contexts/index.js","components/SearchForm/SearchForm.jsx","components/Item/Item.jsx","misc/data.js","components/Paging/component/PageLink.jsx","components/Paging/component/Nav.jsx","components/Paging/component/NavXL.jsx","components/Paging/component/ResultPerPage.jsx","components/Paging/component/PageFormLink.jsx","misc/utils.js","components/Paging/component/Sort.jsx","components/Paging/Paging.jsx","components/App.js","misc/serviceWorker.js","components/Error/Ajv.jsx","douane/lib/schema/index.js","douane/lib/config.js","douane/index.js","components/Store/Store.jsx","index.js","assets/loader_4.gif"],"names":["StoreContext","React","createContext","SearchForm","props","useContext","state","dispatch","isLoading","handleSubmit","e","a","preventDefault","case","Form","className","onSubmit","Group","controlId","InputGroup","Control","type","name","onChange","searchQuery","target","value","payload","placeholder","Append","Button","variant","disabled","onClick","icon","Text","Item","item","console","log","selectedItem","thumbnails","created_date","filename","id","embeds","thumbnailURL","get","url","date","Date","toLocaleDateString","weekday","year","month","day","active","Card","Img","src","Body","Title","Footer","paging","searchResultPerPage","offset","searchResultPageIndex","limit","sort","searchSortBy","searchSortByDirection","searchSortListDirection","filter","sortDirectionItem","symbol","fetchSearchData","path","widenEngine","searchFacets","searchFilters","params","query","expand","response","searchResults","error","PageLink","index","href","Nav","searchResultMaxPage","Array","map","i","key","NavXL","dotBefore","dotAfter","ResultPerPage","Prepend","as","defaultValue","title","nb","PageFormLink","useState","setIndex","useEffect","getRandomString","length","format","mask","indexOf","result","Math","floor","random","searchSortList","sortByItem","handleClickSortBy","sortBy","DropdownButton","alignRight","label","Dropdown","eventKey","Paging","searchResultAvailableAnswersCount","showForm","Sort","library","add","fab","faSearch","faPowerOff","faCheckCircle","faThumbsUp","faBan","faTimes","faUserCheck","faUserTag","faUserCircle","faAddressCard","faCrosshairs","faChevronLeft","faChevronRight","faHashtag","faEllipsisH","faFile","faFileAlt","faSyncAlt","faPaperPlane","faSortAmountDown","faSortAmountUp","Error","message","App","context","searchAnswers","needToFetch","searchIframe","_fetchData","Container","Row","Col","spinner","locale","xs","sm","md","lg","Boolean","window","location","hostname","match","Ajv","errors","dataPath","description","properties","host","default","process","workspace","enum","scope","pattern","widen","site","token","version","lazyLoad","JSON","parse","resultPerPage","Number","parseInt","required","additionalProperties","ajv","useDefaults","init","axios","create","baseURL","headers","Accept","Authorization","responseType","timeout","searchBanners","reducer","action","debug","items","total_count","ceil","reduce","facet","list","_filter","selected","slice","splice","Store","useReducer","Provider","children","widenPickerInterface","_context","_data","this","contextData","data","load","values","d","undefined","isArray","from","product","remove","endsWith","removeAt","removeAll","widenPicker","validate","schema","contextValidator","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","module","exports"],"mappings":"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","file":"static/js/main.6d873dd9.chunk.js","sourcesContent":["import React from 'react';\n\nexport const StoreContext = React.createContext(null);\n","import React from 'react';\nimport {InputGroup,Form,Button} from 'react-bootstrap';\n//import PropTypes from 'prop-types';\n//import get from \"lodash.get\";\n\nimport {StoreContext} from \"contexts\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\n\nconst SearchForm = (props) => {\n    const { state, dispatch } = React.useContext(StoreContext);\n    const {\n        isLoading\n    } = state\n\n    const handleChange = (e) => {\n        const searchQuery= e.target.value;\n        //needed if I want to enable Fuzzy search\n        dispatch({\n            case:\"UPDATE_TEXT_QUERY\",\n            payload:{\n                searchQuery\n            }\n        });\n    }\n\n    const handleReset =(e) => {\n        //e.preventDefault();\n        dispatch({\n            case:\"RESET_TEXT_QUERY\"\n        });\n    }\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        dispatch({\n            case:\"EXECUTE_QUERY\"\n        });\n    }\n\n    return(\n        <Form className=\"pT4__form\" onSubmit={handleSubmit}>\n            <Form.Group controlId=\"basicSearch\">\n                {/*<Form.Label>Email address</Form.Label>*/}\n                <InputGroup className=\"mb-3\">\n                    <Form.Control\n                        type=\"text\"\n                        name=\"query\"\n                        // value={searchQuery}\n                        onChange={handleChange}\n                        placeholder=\"Que cherchez-vous ?\"\n                    />\n                    <InputGroup.Append>\n                        <Button type=\"reset\" variant=\"outline-secondary\" disabled={isLoading} onClick={handleReset}>\n                            <FontAwesomeIcon icon={['fas','times']}/>\n                        </Button>\n                    </InputGroup.Append>\n                    <InputGroup.Append>\n                        <Button type=\"submit\" variant=\"secondary\" disabled={isLoading}>\n                            <FontAwesomeIcon icon={['fas','search']}/>\n                        </Button>\n                    </InputGroup.Append>\n                </InputGroup>\n\n                <Form.Text className=\"text-muted\">\n                    <FontAwesomeIcon icon={['fas','power-off']}/> by\n                    Jahia For Widen\n                </Form.Text>\n            </Form.Group>\n        </Form>\n    );\n}\n\nSearchForm.propTypes={}\n\nexport default SearchForm;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Card} from 'react-bootstrap';\nimport {StoreContext} from \"contexts\";\nimport get from \"lodash.get\";\n\nconst Decote=({discount,price}) => {\n\n    const { state } = React.useContext(StoreContext);\n    const {locale} = state\n\n    const [dashedPrice] = price.map( prc => Number(prc));\n    const formatedDashedPrice = new Intl.NumberFormat(locale, { style: 'currency', currency: 'EUR' }).format(dashedPrice);\n\n    const [discountNumber] = discount.map( discnt => Number(discnt));\n    const formatedDiscount = new Intl.NumberFormat(locale, { style: 'percent'}).format(-Number(discountNumber)/100)\n\n\n    return(\n        <>\n            <span className=\"bg-danger d-block text-white font-weight-bold\">{formatedDiscount}</span>\n            <del className=\"text-muted small mr-3\">{formatedDashedPrice}</del>\n        </>\n    );\n}\n\nDecote.propTypes={\n    discount:PropTypes.array.isRequired,\n    price:PropTypes.array.isRequired\n}\n\nconst Item=({item})=>{\nconsole.log(\"[Item] item : \",item);\n    const { state,dispatch } = React.useContext(StoreContext);\n    const {selectedItem} = state //TODO locale is needed for the date format\n    const {thumbnails,created_date,filename,id,embeds} = item;\n    const thumbnailURL = get(thumbnails,\"160px.url\",null);\n    const url = get(embeds,\"templated.url\",null);\n\n    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\n    let date = new Date(created_date);\n    date = date.toLocaleDateString('fr-FR', options);\n\n    const active = selectedItem.id===id?\"active\":\"\";\n    const handleClick = () =>\n        dispatch({\n            case:\"UPDATE_SELECTED_ITEM\",\n            payload:{\n                id,\n                url\n            }\n        });\n\n    return(\n        <Card className={active} onClick={handleClick}>\n            {thumbnailURL &&\n            <Card.Img variant=\"top\" src={thumbnailURL}/>\n            }\n            <Card.Body>\n                <Card.Title>{filename}</Card.Title>\n                {/*<Card.Text>*/}\n                {/*    {meta.description}*/}\n                {/*</Card.Text>*/}\n            </Card.Body>\n            <Card.Footer className=\"text-center\">\n                {/*{discount &&*/}\n                {/*    <Decote*/}\n                {/*        discount={meta.decote}*/}\n                {/*        price={meta.prix_barre}/>*/}\n                {/*}*/}\n                {date}\n            </Card.Footer>\n        </Card>\n    )\n}\n\nItem.propTypes={\n    item:PropTypes.object.isRequired,\n}\n\nexport default Item;","import get from \"lodash.get\";\n\n// const computeSearchContext = ({searchContexts}) =>\n//     Object.keys(searchContexts).reduce((params, key) => {\n//         let value = searchContexts[key];\n//         if(key===\"segments\")\n//             value = value.replace(\" | \",\"|\");\n//\n//         if (value)\n//             params[`contexts[${key}]`] = value;//contexts[buyerProfile]=promotion\n//         return params;\n//     }, {});\n\nconst computeFacetContext = ({searchFacets}) =>\n    searchFacets.reduce((params,facet) => {\n        // console.log(\"[computeFilterContext] facet : \",facet);\n        const filters = facet.list.reduce((params,filter)=>{\n            // console.log(\"filter.id : \",filter.id)\n            // console.log(\"filter.selected : \",filter.selected)\n            if(filter.selected){\n\n                params[`filters[${filter.type}][values][]`] = filter.filter;\n                params[`filters[${filter.type}][operations][]`]=\"and\"\n            }\n            return params;\n        },{});\n        // console.log(\"[computeFilterContext] filters : \",filters);\n        return{\n            ...params,\n            ...filters\n        }\n    },{});\n\nconst computeFilterContext = ({searchFilters}) =>\n    searchFilters.reduce((params,filter) => {\n        // console.log(\"[computeFilterContext] facet : \",filter);\n        params[`filters[${filter.id}][values][]`] = filter.value;\n        params[`filters[${filter.id}][operations][]`]= filter.operation;\n\n        // console.log(\"[computeFilterContext] filters : \",filters);\n        return params;\n    },{});\n\n\nconst paging = ({searchResultPerPage,searchResultPageIndex}) => {\n    // console.log(\"[paging] searchResultPerPage: \",searchResultPerPage,\"; searchResultPageIndex : \",searchResultPageIndex)\n    return{\n        offset:(searchResultPageIndex-1)*searchResultPerPage,\n        limit:searchResultPerPage\n    };\n}\n\nconst sort = ({searchSortBy,searchSortByDirection,searchSortListDirection}) => {\n    const [sortDirectionItem] = searchSortListDirection.filter(item => item.value === searchSortByDirection);\n    return{\n        sort:`${sortDirectionItem.symbol}${searchSortBy}`\n    };\n\n}\n\nconst fetchSearchData = async ({path = \"/\",state,dispatch}) => {\n    const {\n        widenEngine,\n        searchQuery,\n        //searchContexts,\n        searchFacets,\n        searchFilters,\n        searchResultPerPage,\n        searchResultPageIndex,\n        searchSortBy,\n        searchSortByDirection,\n        searchSortListDirection\n    } = state;\n\n    dispatch({\n        case: \"LOADING\",\n        payload: {\n            value:true\n        }\n    });\n    // console.log(\"searchQuery : \",searchQuery);\n    const params = {\n        query:searchQuery,\n        expand:\"embeds,thumbnails,file_properties\",\n        // ...computeSearchContext({searchContexts}),\n        // ...computeFacetContext({searchFacets}),\n        // ...computeFilterContext({searchFilters}),\n        ...paging({searchResultPerPage,searchResultPageIndex}),\n        ...sort({searchSortBy,searchSortByDirection,searchSortListDirection})\n    }\n\n    // console.log(\"[fetchSearchData] params : \",params);\n\n    try {\n        //TODO test response.status===200 || 204? sinon throw Error(response.status)\n        const response = await widenEngine(path, {params})\n        dispatch({\n            case: \"UPDATE_SEARCH_RESULTS\",\n            payload: {\n                searchResults: get(response,\"data\",{})\n            }\n        });\n    }catch (error) {\n        dispatch({\n            case: \"ERROR\",\n            payload: {\n                error\n            }\n        });\n    }\n    dispatch({\n        case: \"LOADING\",\n        payload: {\n            value:false\n        }\n    });\n};\n\nexport {\n    fetchSearchData\n}","import React from 'react';\nimport {StoreContext} from \"contexts\";\n\nconst PageLink=({index}) =>{\n    const { state, dispatch } = React.useContext(StoreContext);\n    const {\n        searchResultPageIndex\n    } = state\n\n    const className = searchResultPageIndex===index ? \"active\" : \"\";\n\n    const handleGoToPage = (e) =>{\n        e.preventDefault();\n        dispatch({\n            case: \"GOTO_RESULT_PAGE\",\n            payload:{\n                index\n            }\n        });\n    }\n\n    return(\n        <li>\n            <a href=\"#\" className={className} onClick={handleGoToPage}>{index}</a>\n        </li>\n    )\n}\n\nexport default PageLink;","import React from 'react';\nimport {StoreContext} from \"contexts\";\nimport PageLink from \"./PageLink\";\n\nconst Nav=()=>{\n    const { state } = React.useContext(StoreContext);\n    const {\n        searchResultMaxPage\n    } = state\n\n    return (\n        <>\n            {[...Array(searchResultMaxPage)].map((e,i)=>\n                <PageLink key={i} index={i+1}/>\n            )}\n        </>\n\n    )\n}\n\nexport default Nav;","import React from 'react';\nimport {StoreContext} from \"contexts\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport PageLink from \"./PageLink\";\n\nconst NavXL=()=>{\n    const { state } = React.useContext(StoreContext);\n    const {\n        searchResultPageIndex,\n        searchResultMaxPage\n    } = state\n\n    const dotBefore = searchResultPageIndex > 3 ? true : false;\n    const dotAfter = searchResultMaxPage - searchResultPageIndex >2 ? true : false;\n\n\n    let paging;\n    switch(true){\n        case searchResultPageIndex <=2 :\n            paging = [2,3];\n            break;\n        case searchResultMaxPage - searchResultPageIndex >1:\n            paging = [searchResultPageIndex-1,searchResultPageIndex,searchResultPageIndex+1];\n            break;\n        case searchResultMaxPage - searchResultPageIndex === 1:\n            paging = [searchResultPageIndex-1,searchResultPageIndex];\n            break;\n        default:\n            paging = [searchResultPageIndex-2,searchResultPageIndex-1];\n            break;\n    }\n\n    return (\n        <>\n            <PageLink index={1}/>\n            {dotBefore &&\n                <li className=\"interlayer\" >\n                    <FontAwesomeIcon icon={['fas','ellipsis-h']}/>\n                </li>\n            }\n            {paging.map((e,i)=>\n                <PageLink key={i} index={e}/>\n            )}\n            {dotAfter &&\n                <li className=\"interlayer\">\n                    <FontAwesomeIcon icon={['fas','ellipsis-h']}/>\n                </li>\n            }\n            <PageLink index={searchResultMaxPage}/>\n        </>\n\n    )\n}\n\nexport default NavXL;","import React from 'react';\nimport {StoreContext} from \"contexts\";\nimport {Button, Form, InputGroup} from \"react-bootstrap\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\n\nconst ResultPerPage=() =>{\n    const { state,dispatch } = React.useContext(StoreContext);\n    const {\n        searchResultPerPage\n    } = state\n\n    const handleChange = (e) => {\n        dispatch({\n            case: \"UPDATE_RESULT_PER_PAGE\",\n            payload:{\n                value:e.target.value\n            }\n        });\n    }\n\n    return(\n        <li>\n            <InputGroup>\n                <InputGroup.Prepend>\n                    <InputGroup.Text id=\"inputGroupPrepend\">\n                        {/*<FontAwesomeIcon icon={['fas','file']}/>*/}\n                        <FontAwesomeIcon icon={['far','file-alt']}/>\n                    </InputGroup.Text>\n                </InputGroup.Prepend>\n                <Form.Control\n                    as=\"select\"\n                    defaultValue={searchResultPerPage}\n                    onChange={handleChange}\n                    title=\"Result per page\"\n                >\n                    {[5,10,20,50,100].map( nb => <option key={nb} value={nb}>{nb}</option>)}\n                </Form.Control>\n                {/*<InputGroup.Append>*/}\n                {/*    <InputGroup.Text id=\"inputGroupPrepend\">*/}\n                {/*        /!*<FontAwesomeIcon icon={['fas','file']}/>*!/*/}\n                {/*        <FontAwesomeIcon icon={['far','file-alt']}/>*/}\n                {/*    </InputGroup.Text>*/}\n                {/*</InputGroup.Append>*/}\n            </InputGroup>\n        </li>\n    )\n}\n\nexport default ResultPerPage;","import React from 'react';\nimport {StoreContext} from \"contexts\";\nimport {Button, Form, InputGroup} from \"react-bootstrap\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\n\nconst PageFormLink=() =>{\n    const { state,dispatch } = React.useContext(StoreContext);\n    const {\n        isLoading,\n        searchResultPageIndex,\n        searchResultMaxPage\n    } = state\n\n    const[index,setIndex] = React.useState(searchResultPageIndex);\n\n    React.useEffect( () =>{\n        setIndex(searchResultPageIndex);\n    },[searchResultPageIndex])\n\n    const handleChange = (e) => {\n        setIndex(e.target.value);\n    }\n\n    const handleGoToPage = (e) =>{\n        e.preventDefault();\n\n        if(searchResultMaxPage<index)\n            return;\n\n        dispatch({\n            case: \"GOTO_RESULT_PAGE\",\n            payload:{\n                index\n            }\n        });\n    }\n\n\n    return(\n        <li>\n            <Form className=\"pT4__form-goto\" onSubmit={handleGoToPage}>\n                <InputGroup>\n                    <InputGroup.Prepend>\n                        <InputGroup.Text id=\"inputGroupPrepend\">\n                            {/*<FontAwesomeIcon icon={['fas','file']}/>*/}\n                            <FontAwesomeIcon icon={['far','paper-plane']}/>\n                        </InputGroup.Text>\n                    </InputGroup.Prepend>\n                    <Form.Control\n                        type=\"text\"\n                        name=\"paging\"\n                        value={index}\n                        onChange={handleChange}\n                        title=\"Goto Page\"\n                    />\n                    <InputGroup.Append>\n                        <Button type=\"submit\" variant=\"outline-secondary\" disabled={isLoading}>\n                            <FontAwesomeIcon icon={['fas','sync-alt']}/>\n                        </Button>\n                    </InputGroup.Append>\n                </InputGroup>\n            </Form>\n        </li>\n    )\n}\n\nexport default PageFormLink;","\nconst _WEAKREFERENCE_ = \"WEAKREFERENCE\";\n//TODO voir si avec SDL je peux passe l'URL des images!\nfunction getProperties(properties,context){\n    if(!properties) return;\n    return properties.reduce(function(bundle,property){\n        const key = property.name.split(\":\").pop();\n        let value = property.value || property.values;\n// console.log(\"property : \",property);\n        if(property.type === _WEAKREFERENCE_ &&\n            property.weakreference &&\n            property.weakreference.path\n        ){\n            property.weakreference.url=\n                `${context.files_endpoint}${encodeURI(property.weakreference.path)}`;\n            value = property.weakreference;\n        }\n\n        bundle[key]=value;\n        return bundle;\n    },{});\n};\n\n// function getWeakURL(filesEndpoint,nodePath){\n//     return `${filesEndpoint}${encodeURI(nodePath)}`;///encodeURIComponent()\n// };\n\nfunction getRandomString (length, format){\n    let mask = \"\";\n    if (format.indexOf(\"a\") > -1) mask += \"abcdefghijklmnopqrstuvwxyz\";\n    if (format.indexOf(\"A\") > -1) mask += \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n    if (format.indexOf(\"#\") > -1) mask += \"0123456789\";\n    if (format.indexOf(\"!\") > -1) mask += \"~`!@#$%^&*()_+-={}[]:\\\";'<>?,./|\\\\\";\n    let result = \"\";\n    for (let i = length; i > 0; --i) result += mask[Math.floor(Math.random() * mask.length)];\n    return result;\n};\n\nfunction getGQLWorkspace(workspace){\n    return workspace===\"default\"?\n        \"EDIT\":\n        workspace.toUpperCase()\n}\n\nexport {\n    getProperties,\n    getRandomString,\n    getGQLWorkspace\n}","import React from 'react';\nimport {StoreContext} from \"contexts\";\nimport {Dropdown,DropdownButton,Button} from 'react-bootstrap';\nimport {getRandomString} from \"misc/utils\";\nimport PageLink from \"./PageLink\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\n\nconst Nav=()=>{\n    const { state, dispatch } = React.useContext(StoreContext);\n    const {\n        searchSortBy,\n        searchSortByDirection,\n        searchSortList,\n        searchSortListDirection,\n    } = state\n    const [sortByItem] = searchSortList.filter(item => item.value===searchSortBy);\n    const [sortDirectionItem] = searchSortListDirection.filter(item => item.value === searchSortByDirection);\n\n    const handleClickSortBy = (e) =>{\n        const sortBy = e.target.id;\n        dispatch({\n            case:\"UPDATE_SORT_ITEM\",\n            payload:{\n                sortBy\n            }\n        });\n    };\n\n    const handleClickSortByDirection = (e) =>\n        dispatch({\n            case:\"TOGGLE_SORT_DIRECTION\"\n        });\n\n//TODO lister les options avec value et key\n    //faire un dropdown button pour chaque option\n    //faire le dispatch qui va bien -> update propertie and\n    //     <i className=\"fas fa-sort-amount-up\"></i>\n    return (\n        <>\n            <li>\n                <DropdownButton\n                    alignRight\n                    variant=\"outline-dark\"\n                    title={`Sort by ${sortByItem.label}`}\n                    id={`sortBy_${getRandomString(6,\"aA#\")}`}\n                >\n                    {searchSortList.map((item,i)=>\n                        <Dropdown.Item eventKey={i} id={item.value} onClick={handleClickSortBy}>{item.label}</Dropdown.Item>\n                    )}\n                    {/*<Dropdown.Divider />*/}\n                </DropdownButton>\n            </li>\n            <li>\n                <Button\n                    variant=\"outline-dark\"\n                    onClick={handleClickSortByDirection}\n                >\n                    <FontAwesomeIcon icon={['fas',sortDirectionItem.label]}/>\n                </Button>\n            </li>\n        </>\n    )\n}\n\nexport default Nav;","import React from 'react';\n// import PropTypes from 'prop-types';\nimport {StoreContext} from \"contexts\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport Nav from \"./component/Nav\";\nimport NavXL from \"./component/NavXL\";\nimport ResultPerPage from \"components/Paging/component/ResultPerPage\";\nimport PageFormLink from \"components/Paging/component/PageFormLink\";\nimport Sort from \"components/Paging/component/Sort\";\n\nconst Paging=(props)=>{\n\n    const { state,dispatch } = React.useContext(StoreContext);\n    const {\n        searchResultPerPage,\n        searchResultMaxPage,\n        searchResultAvailableAnswersCount\n    } = state\n\n    //TODO think about this\n    const showForm = searchResultMaxPage > 10;\n\n    if(!searchResultMaxPage)\n        return(<></>);\n\n    const handlePrev = (e) =>{\n        e.preventDefault();\n        dispatch({\n            case: \"PREVIOUS_RESULT_PAGE\"\n        });\n    }\n\n\n    const handleNext = (e) =>{\n        e.preventDefault();\n        dispatch({\n            case: \"NEXT_RESULT_PAGE\"\n        });\n    }\n\n    return(\n        <>\n            <ul className=\"pT4__paging results\">\n                <li className=\"results\">\n                    {/*<FontAwesomeIcon icon={['fas','hashtag']}/>*/}\n                    <h6>Résultats : {searchResultAvailableAnswersCount}</h6>\n                </li>\n                <Sort/>\n                <ResultPerPage/>\n\n                {showForm &&\n                <PageFormLink/>\n                }\n            </ul>\n            <ul className=\"pT4__paging\">\n                <li className=\"nav\">\n                    <a href=\"#\" onClick={handlePrev}>\n                        <FontAwesomeIcon icon={['fas','chevron-left']} />\n                    </a>\n                </li>\n\n                {searchResultMaxPage <=5 &&\n                <Nav/>\n                }\n\n                {searchResultMaxPage > 5 &&\n                <NavXL/>\n                }\n\n                <li className=\"nav\">\n                    <a href=\"#\" onClick={handleNext}>\n                        <FontAwesomeIcon icon={['fas','chevron-right']} />\n                    </a>\n                </li>\n            </ul>\n        </>\n\n    )\n}\n\nPaging.propTypes={}\n\nexport default Paging;","import React from 'react';\n// import logo from '../assets/logo.svg';\nimport spinner from \"assets/loader_4.gif\";\nimport 'components/App.scss';\n\nimport get from \"lodash.get\";\nimport {InputGroup, FormControl, Button, Row, Container,Col} from \"react-bootstrap\";\n\nimport {StoreContext} from \"contexts\";\nimport SearchForm from \"components/SearchForm\";\nimport Item from \"components/Item\";\nimport Facet from \"components/Facet\";\nimport {fetchSearchData} from \"misc/data\";\nimport CurrentFilter from \"components/CurrentFilter\";\nimport Paging from \"components/Paging\";\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport { fab } from '@fortawesome/free-brands-svg-icons';\nimport { faSortAmountDown,faSortAmountUp,faSyncAlt,faFile,faSearch,faPowerOff,faBan,faTimes,faUserCheck,faUserTag,faCrosshairs,faChevronLeft,faChevronRight,faHashtag,faEllipsisH } from '@fortawesome/free-solid-svg-icons';\nimport { faPaperPlane,faFileAlt,faCheckCircle,faThumbsUp,faUserCircle,faAddressCard} from '@fortawesome/free-regular-svg-icons';\n\nlibrary.add(\n    fab,\n    faSearch,\n    faPowerOff,\n    faCheckCircle,\n    faThumbsUp,\n    faBan,\n    faTimes,\n    faUserCheck,\n    faUserTag,\n    faUserCircle,\n    faAddressCard,\n    faCrosshairs,\n    faChevronLeft,\n    faChevronRight,\n    faHashtag,\n    faEllipsisH,\n    faFile,\n    faFileAlt,\n    faSyncAlt,\n    faPaperPlane,\n    faSortAmountDown,\n    faSortAmountUp\n);\n\nconst errorMsg = 'Oups something get wrong';\nconst Error= ({e}) => {\n    return(\n        <>\n            <h1>{errorMsg}</h1>\n            <p>{e.message}</p>\n        </>\n    );\n}\n\nconst App = (props) => {\n    const {state, dispatch} = React.useContext(StoreContext);\n    const {\n        context,\n        error,\n        isLoading,\n        searchAnswers,\n        searchIframe,\n        searchFacets,\n        needToFetch\n    } = state;\n\n    React.useEffect(() => {\n\n        // console.log(\"[APP] needToFetch : \",needToFetch);\n\n        const _fetchData = async () =>\n            await fetchSearchData({\n                path: \"/assets/search\",\n                state,\n                dispatch\n            });\n\n        if (needToFetch)\n            _fetchData();\n\n    }, [needToFetch])\n\n    if (error) return <Error e={error}/>;\n\n    return (\n        <Container className=\"pT4\">\n            <Row>\n                <Col>\n                    <SearchForm/>\n                    {/*<CurrentFilter/>*/}\n                    <Paging/>\n                </Col>\n            </Row>\n            <Row>\n                <Col>\n                    {isLoading &&\n                    <img className=\"pT4__spinner\" src={spinner}/>\n                    }\n                    {!isLoading &&\n                    <div className={`pT4__result ${isLoading ? \"\" : \"fade-in\"}`}>\n                        {\n                            searchAnswers.map(item =>\n                                <Item\n                                    key={item.id}\n                                    item={item}\n                                    locale={state.locale}\n                                />\n                            )\n                        }\n                    </div>\n                        // searchIframe &&\n                        // <iframe frameBorder=\"0\" src={searchIframe} width=\"100%\" height=\"700px\"></iframe>\n                    }\n                </Col>\n                <Col xs=\"4\" sm=\"3\" md=\"4\" lg=\"3\">\n                    {/*<ul className=\"pT4__facet\">*/}\n                    {/*    {searchFacets.map( facet =>*/}\n                    {/*        <Facet*/}\n                    {/*            key={facet.id}*/}\n                    {/*            facet={facet}*/}\n                    {/*        />*/}\n                    {/*    )*/}\n                    {/*    }*/}\n                    {/*</ul>*/}\n                </Col>\n            </Row>\n        </Container>\n    );\n\n    //\n    //   const [query, setQuery] = React.useState();\n    //   const [categories, setCategories] = React.useState([]);\n    // const [iframe, setIframe] = React.useState();\n    //   const [search, setSearch] = React.useState({\n    //       url:\"/integrations/url\",\n    //       params: {\n    //           hideSearchBar: true,\n    //           query: query\n    //       }\n    //   });\n    //   // const [isLoading, setIsLoading] = React.useState(false);\n    //   const [isError, setIsError] = React.useState(false);\n    //\n    // React.useEffect(() => {\n    //   const fetchData = async () => {\n    //       const categories = await widen.get(\"/categories\");\n    //       console.log(\"categories : \",categories)\n    //       setCategories(get(categories,\"data.items\",[]));\n    //   };\n    //\n    //   fetchData();\n    //\n    // },[]);\n    //\n    //   React.useEffect(() => {\n    //       if(search.params.query){\n    //           const fetchData = async () => {\n    //               setIframe(false);\n    //               setIsError(false);\n    //               setIsLoading(true);\n    //               try {\n    //                   const instantSearch = await widen.get(search.url,{params:search.params});\n    //                   console.log(\"instantSearch : \", instantSearch.data);\n    //                   //const frameURL = URL.createObjectURL(instantSearch.data);\n    //                   setIframe(instantSearch.data.url);\n    //               } catch (error) {\n    //                   setIsError(true);\n    //               }\n    //               setIsLoading(false);\n    //           };\n    //           fetchData();\n    //       }\n    //   },[search])\n    //\n    //\n    //   window.addEventListener('message', event =>{\n    //       //TODO verifier si j'ai un event.data.items[0].embed_code sinon laisser passer\n    //       // console.log(\"message : \",event.data);\n    //       // const embedCode = event.data.items[0].embed_code;\n    //       // console.log(embedCode);\n    //\n    //       // Insert embedCode into user’s html content\n    //       // Close iframe\n    //   })\n    //\n    // const handleChange = (e) =>{\n    //     const value= e.target.value;\n    //     console.log(\"value : \",value);\n    //     setQuery(value);\n    // }\n    // const handleSearch = () =>{\n    //     console.log(\"handleSearch query : \",query);\n    //       const params = {...search.params,query}\n    //     setSearch({...search,params});\n    // }\n    //\n    // const handleCategory = (e,category) => {\n    //     console.log(\"handleCategory category : \",category);\n    //     e.preventDefault();\n    //     // const _query = `${query}&assetcategory:${category.id}`;//encodeURI();\n    //     // const params = {...search.params,query:_query}\n    //     const params = {...search.params,assetcategory:category.id};\n    //     setSearch({...search,params});\n    // }\n    //\n    // return (\n    //     <Container fluid>\n    //         <Row>\n    //             <Col>\n    //                 <ul>\n    //                 {categories.map(category =>\n    //                     <li key={category.id}>\n    //                         <a href=\"#\" onClick={ e => handleCategory(e,category)}>\n    //                             {category.name}\n    //                         </a>\n    //                     </li>\n    //                   )}\n    //                 </ul>\n    //             </Col>\n    //             <Col xs={10}>\n    //                 {isError && <div>Something went wrong ...</div>}\n    //\n    //                 <InputGroup className=\"mb-3\">\n    //                     <FormControl\n    //                         placeholder=\"Search text\"\n    //                         onChange={handleChange}\n    //                     />\n    //                     <InputGroup.Append>\n    //                         <Button\n    //                             variant=\"outline-secondary\"\n    //                             onClick={handleSearch}>\n    //                             Search\n    //                         </Button>\n    //                     </InputGroup.Append>\n    //                 </InputGroup>\n    //                 {isLoading &&\n    //                   <img src={spinner}/>\n    //                 }\n    //                 {/*<img src={spinner}/>*/}\n    //                 {iframe &&\n    //                     <iframe frameBorder=\"0\" src={iframe} width=\"100%\" height=\"700px\"></iframe>\n    //                 }\n    //             </Col>\n    //         </Row>\n    //     </Container>\n    //\n    //\n    // );\n}\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport PropTypes from \"prop-types\";\n\nconst Ajv = ({item,errors})=> {\n    return(\n        <div>\n            <h1>Validation errors</h1>\n            <p>An error occurred when validating <b>{item}</b></p>\n            <ul>\n                {errors.map( (error,i) =>\n                    <li>\n                        {error.dataPath} : {error.message}\n                    </li>)\n                }\n            </ul>\n        </div>\n    )\n}\n\nAjv.propTypes={\n    item:PropTypes.string.isRequired,\n    errors:PropTypes.array.isRequired\n};\n\nexport default Ajv;","// import jCustomer from \"./definitions/jCustomer\";\n// import jContent from \"./definitions/jContent\";\n// import gql from \"./definitions/gql\";\nimport {workspace} from \"douane/lib/config\";\n\nexport default{\n    context:{\n        title:\"context validation schema \",\n        description:\"context is an object provided by the page in charge to load the app\",\n        // definitions: {\n        //     jContent:jContent,\n        //     jCustomer:jCustomer,\n        //     gql:gql\n        // },\n        type:\"object\",\n        // properties:{\n        //     jContent:{$ref:\"#jContent\"},\n        //     gql:{$ref:\"#gql\"},\n        //     jCustomer:{$ref:\"#jCustomer\"}\n        // },\n        properties:{\n            //\"fr\" or \"fr-FR\" TODO voir si je suis permissif et accpete 'fr'\n            host:{\n                type:\"string\",\n                format:\"uri\",\n                default:process.env.REACT_APP_JCONTENT_HOST || \"http://localhost:8080\"\n            },\n            workspace:{\n                type:\"string\",\n                enum:workspace,\n                default:process.env.REACT_APP_JCONTENT_WORKSPACE || workspace[1]//\"live\"\n            },\n            scope:{\n                type:\"string\",\n                pattern:\"[a-zA-Z0-9-_]+\",//iso\n                default:process.env.REACT_APP_JCONTENT_SCOPE\n            },\n            widen:{\n                type:\"object\",\n                properties:{\n                    url:{\n                        type:\"string\",\n                        format:\"uri\",\n                        default:process.env.REACT_APP_WIDEN_ENDPOINT //could be null in case of edit!\n                    },\n                    site:{\n                        type:\"string\",\n                        default:process.env.REACT_APP_WIDEN_SITE\n                    },\n                    token:{\n                        type:\"string\",\n                        default:process.env.REACT_APP_WIDEN_TOKEN\n                    },\n                    version:{\n                        type:\"string\",\n                        default:process.env.REACT_APP_WIDEN_VERSION\n                    },\n                    lazyLoad:{\n                        type:\"boolean\",\n                        default:JSON.parse(process.env.REACT_APP_WIDEN_LAZY_LOAD)\n                    },\n                    resultPerPage:{\n                        type:\"integer\",\n                        default:Number.parseInt(process.env.REACT_APP_WIDEN_RESULT_PER_PAGE, 10)\n                    }\n                    // locale:{\n                    //     type:\"object\",\n                    //     properties:{\n                    //         user:{\n                    //             type:\"string\",\n                    //             pattern:\"^[a-z]{2}$\",//\"[a-z]{2}(?:-[A-Z]{2})?\"\n                    //             default:process.env.REACT_APP_WIDEN_USER_LOCALE\n                    //         },\n                    //         search:{\n                    //             type:\"string\",\n                    //             pattern:\"^[a-z]{2}-[A-Z]{2}$\",\n                    //             default:process.env.REACT_APP_WIDEN_SEARCH_LOCALE\n                    //         }\n                    //     },\n                    //     required: [\"user\", \"search\"],\n                    //     additionalProperties:false\n                    //\n                    // },\n                },\n                required: [\"url\", \"site\",\"token\",\"version\",\"lazyLoad\",\"resultPerPage\"],//,\"locale\"\n                additionalProperties:false\n            },\n            // cdp_endpoint:{\n            //     type:\"string\",\n            //     format:\"uri\",\n            //     default:process.env.REACT_APP_JCUSTOMER_ENDPOINT //could be null in case of edit!\n            // },\n            // cdp_token:{\n            //     type:\"string\",\n            //     default:process.env.REACT_APP_JCUSTOMER_TOKEN\n            // },\n            // gql_endpoint:{\n            //     type:\"string\",\n            //     format:\"uri\",\n            //     default:process.env.REACT_APP_JCONTENT_GQL_ENDPOINT || \"http://localhost:8080/modules/graphql\"\n            // },\n            // gql_authorization:{\n            //     type:\"string\",\n            //     default:process.env.REACT_APP_JCONTENT_GQL_AUTH || \"Basic cm9vdDpyb290\"\n            // },\n            // gql_variables:{\n            //     type:\"object\",\n            //     properties:{\n            //         language:{\n            //             type:\"string\",\n            //             pattern:\"[a-z]{2}(?:_[A-Z]{2})?\",//\"fr\" or \"fr_FR\"\n            //             default:process.env.REACT_APP_WIDEN_USER_LOCALE\n            //         }\n            //\n            //     },\n            //     required: [\"language\"],\n            //     additionalProperties:false\n            // },\n            // files_endpoint:{\n            //     type:\"string\",\n            //     format:\"uri\",\n            //     default:process.env.REACT_APP_JCONTENT_FILES_ENDPOINT || \"http://localhost:8080/files/live\"\n            // }\n        },\n        required: [\n            \"host\",\n            \"workspace\",\n            \"scope\",\n            \"widen\",\n            // \"cdp_endpoint\",\n            // \"cdp_token\",\n            // \"gql_endpoint\",\n            // \"gql_authorization\",\n            // \"gql_variables\",\n            // \"files_endpoint\"\n        ],\n        additionalProperties:false\n    }\n}","// const validMark=\"[*]\";\n// const score_splitPattern=\"::\";\n\nconst workspace = [\"default\",\"live\"];\n// const cnd_type = {\n//     QNA:\"game4nt:qna\",\n//     WARMUP:\"game4nt:warmup\"\n// }\n// const consent_status={\n//     GRANTED:\"GRANTED\",\n//     DENIED:\"DENIED\",\n//     REVOKED:\"REVOKED\"\n// };\n\nexport {\n    workspace,\n    // cnd_type,\n    // validMark,\n    // consent_status,\n    // score_splitPattern\n}","import * as Ajv from \"ajv\";\nimport schema from \"douane/lib/schema\";\n// import {getGQLWorkspace} from \"misc/utils\";\n\nconst ajv = new Ajv({useDefaults:true});\n//TODO le try catch doit etre fait ici et un component react doit etre retourne\nconst contextValidator = (context) =>{\n\n    const valid = ajv.validate(schema.context, context);\n    if (!valid)\n        // throw new Error(`An error occurred during the validation of context object, errors : ${JSON.stringify(ajv.errors)}`);\n        throw {item:\"Context configuration object\",errors:ajv.errors};\n    // context.gql_variables.workspace = getGQLWorkspace(context.workspace);\n    return context;\n}\n\nexport {\n    contextValidator\n}","import React from \"react\";\nimport {StoreContext} from \"contexts\";\nimport axios from \"axios\";\nimport {getRandomString} from \"misc/utils\";\n// import {fetchSearchData} from \"misc/data\";\n\n// import {getRandomString} from \"misc/utils\";\n// import {syncQuizScore} from \"misc/tracker\";\n// import QuizMapper from \"components/Quiz/QuizModel\";\n\nconst init = context => {\n    const widenEngine = axios.create({\n        baseURL:`${context.widen.url}/${context.widen.version}`,\n        headers:{\n            \"Content-Type\":\"application/json\",\n            Accept:\"application/json\",\n            Authorization:`Bearer ${context.widen.site}/${context.widen.token}`\n        },\n        responseType:\"json\",\n        timeout:3000\n    });\n    // widenEngine.interceptors.request.use((config) => {\n    //     config.params = config.params || {};\n    //     config.params[\"token\"] = context.widen.token;\n    //     config.params[\"action\"] =\"widenSearch\";//wordWheel fuzzy\n    //     config.params[\"all_items\"] =\"true\";\n    //     config.params[\"user_locale\"] =context.widen.locale.user;\n    //     config.params[\"search_locale\"] =context.widen.locale.search;\n    //     return config;\n    // });\n\n    // const profileEngine = axios.create({\n    //     baseURL:context.cdp_endpoint,\n    //     responseType:\"json\",\n    //     withCredentials: true,//important to send the context-profile-id cookie\n    //     timeout:1000\n    // });\n    // //\n    // profileEngine.interceptors.request.use((config) => {\n    //     config.headers = config.headers || {};\n    //     config.headers[\"Content-Type\"] = \"application/json\";\n    //     config.headers[\"Accept\"] =\"application/json\";\n    //     return config;\n    // });\n\n    const {lazyLoad,resultPerPage} = context.widen;\n\n    return {\n        context,\n        //locale:context.widen.locale.search,\n        error:null,\n        isLoading:false,\n        needToFetch:!lazyLoad,//false,\n        //needToFetch:false,\n        // profileEngine,\n        // userProfile:{},\n        selectedItem:{},\n        widenEngine,\n        searchAnswers:[],\n        searchIframe:null,//not needed if I use searchAnswers\n        //searchContexts:{},\n        searchSortBy:\"created_date\",//newest assets first //TODO voir si je passe ça configurable au niveau jahia\n        searchSortByDirection:\"DESC\",\n        searchSortList:[\n            {value:\"created_date\",label:\"Date Added\"},\n            {value:\"last_update_date\",label:\"Date Updated\"},\n            {value:\"filename\",label:\"Filename\"},\n            {value:\"file_format\",label:\"File Format\"},\n            {value:\"file_size\",label:\"File Size\"},\n\n        ],\n        searchSortListDirection:[\n            {value:\"ASC\",label:\"sort-amount-up\",symbol:\"\"},\n            {value:\"DESC\",label:\"sort-amount-down\",symbol:\"-\"}],\n        searchQuery:null,\n        searchFacets:[],\n        searchFilters:[],\n        searchBanners:[],\n        searchResultPerPage:Number.parseInt(resultPerPage,10),//be sure it is an integer base 10\n        searchResultMaxPage:null,\n        searchResultPageIndex:1,\n        searchResultAvailableAnswersCount:null\n    }\n}\n\nconst reducer = (state, action) => {\n    const { payload } = action;\n\n    switch (action.case) {\n        case \"UPDATE_TEXT_QUERY\": {\n            console.debug(\"[STORE] UPDATE_TEXT_QUERY - query: \",payload.searchQuery);\n            return {\n                ...state,\n                searchQuery:payload.searchQuery\n            }\n        }\n        case \"RESET_TEXT_QUERY\": {\n            console.debug(\"[STORE] RESET_TEXT_QUERY\");\n            return {\n                ...state,\n                searchQuery:\"\",\n                needToFetch:true\n            }\n        }\n        case \"EXECUTE_QUERY\": {\n            console.debug(\"[STORE] EXECUTE_QUERY\");\n            return {\n                ...state,\n                searchResultPageIndex:1,//new search reset paging\n                needToFetch:true\n            }\n        }\n        case \"UPDATE_SELECTED_ITEM\": {\n            const {url} = payload;\n            console.debug(\"[STORE] UPDATE_SELECTED_ITEM - payload: \",payload);\n            //TODO populate the interface object with the url.\n            return {\n                ...state,\n                selectedItem:payload\n            };\n        }\n        case \"UPDATE_SEARCH_RESULTS\": {\n            console.debug(\"[STORE] UPDATE_SEARCH_RESULTS - searchResults: \",payload.searchResults);\n            //sort,start_answer\n            const {items,total_count} = payload.searchResults\n            const {searchResultPerPage,searchResultPageIndex} = state;\n            let {searchResultMaxPage} = state;\n            const searchResultAvailableAnswersCount = total_count;\n\n            //TODO si catalogue empty gerer le cas avec un boolean\n\n            //refine calatog based on existing filters !\n            // catalogs.map(facet => {\n            //     facet.list.map(filter => {\n            //         filter.id = getRandomString(8,\"#aA\");\n            //         return filter;\n            //     })\n            //     return facet;\n            // });\n\n            //new search\n            if(searchResultPageIndex === 1)\n                searchResultMaxPage =Math.ceil(searchResultAvailableAnswersCount/searchResultPerPage);\n\n            return {\n                ...state,\n                searchAnswers:items,\n                // searchFacets:catalogs,\n                // searchFilters:filters,\n                // searchBanners:banners || [],\n                searchResultAvailableAnswersCount,\n                searchResultMaxPage,\n                needToFetch:false\n            };\n        }\n        case \"TOGGLE_FILTER\": {\n            const {filter} = payload;//fitler is an element of  widen.catalogs.list\n            console.debug(\"[STORE] TOGGLE_ANSWER -> filter id :\",filter.id);\n\n            let [facet,index] = state.searchFacets.reduce((result,facet,index)=>{\n                if(facet.id === filter.type)\n                    result = [facet,index];\n                return result;\n            },[]);\n\n            const list = facet.list.map(_filter => {\n                if(_filter.id === filter.id)\n                    return {\n                        ..._filter,\n                        selected:!_filter.selected\n                    };\n                return _filter;\n            });\n\n            facet = {\n                ...facet,\n                list\n            }\n\n            const searchFacets = state.searchFacets.slice();\n            searchFacets.splice(index, 1,facet);\n\n            console.debug(\"[STORE] searchFacets :\",searchFacets);\n\n            return {\n                ...state,\n                searchFacets,\n                searchResultPageIndex:1,//new search reset paging\n                needToFetch:true\n            };\n        }\n        case \"REMOVE_FILTER\": {\n            const {filter} = payload;//fitler is an element of  widen.filters\n            console.debug(\"[STORE] REMOVE_FILTER -> filter id :\",filter.id);\n\n            const searchFacets = state.searchFacets.filter( facet => facet.id !== filter.id);\n            // searchFacets.splice(index, 1,facet);\n\n            console.debug(\"[STORE] searchFacets :\",searchFacets);\n            //#2 remove for existing filters\n            const searchFilters = state.searchFilters.filter(_filter => _filter.id !== filter.id);\n\n            return {\n                ...state,\n                searchFacets,\n                searchFilters,\n                searchResultPageIndex:1,//new search reset paging\n                needToFetch:true\n            };\n        }\n        case \"ERROR\": {\n            console.debug(\"[STORE] ERROR - searchResults: \",payload.error);\n            return {\n                ...state,\n                error:payload.error\n            };\n        }\n        case \"LOADING\": {\n            console.debug(\"[STORE] LOADING - value: \",payload.value);\n            return {\n                ...state,\n                isLoading:payload.value\n            };\n        }\n        case \"PREVIOUS_RESULT_PAGE\": {\n            console.debug(\"[STORE] PREVIOUS_RESULT_PAGE\");\n\n            if(state.searchResultPageIndex <= 1)\n                return {\n                ...state\n            }\n\n            const searchResultPageIndex = state.searchResultPageIndex -1;\n\n            return {\n                ...state,\n                needToFetch:true,\n                searchResultPageIndex\n            };\n        }\n        case \"NEXT_RESULT_PAGE\": {\n            console.debug(\"[STORE] NEXT_RESULT_PAGE\");\n            const {searchResultMaxPage} = state;\n\n            if(state.searchResultPageIndex >= searchResultMaxPage)\n                return {\n                    ...state\n                }\n\n            const searchResultPageIndex = state.searchResultPageIndex +1;\n\n            return {\n                ...state,\n                needToFetch:true,\n                searchResultPageIndex\n            };\n        }\n        case \"GOTO_RESULT_PAGE\": {\n            console.debug(\"[STORE] GOTO_RESULT_PAGE payload : \",payload);\n            const index = Number(payload.index);\n            const {searchResultMaxPage} = state;\n\n            if(!index || index < 1 || index > searchResultMaxPage)\n                return {\n                    ...state\n                }\n\n            return {\n                ...state,\n                needToFetch:true,\n                searchResultPageIndex:index\n            };\n        }\n        case \"UPDATE_RESULT_PER_PAGE\": {\n            console.debug(\"[STORE] UPDATE_RESULT_PER_PAGE payload : \",payload);\n            const {value} = payload;\n\n            return {\n                ...state,\n                searchResultPerPage:value,\n                searchResultPageIndex:1,\n                needToFetch:true\n            };\n        }\n        case \"UPDATE_SORT_ITEM\": {\n            console.debug(\"[STORE] UPDATE_SORT_ITEM payload : \",payload);\n            const {sortBy} = payload;\n\n            return {\n                ...state,\n                searchSortBy:sortBy,\n                needToFetch:true\n            };\n        }\n        case \"TOGGLE_SORT_DIRECTION\": {\n            console.debug(\"[STORE] TOGGLE_SORT_DIRECTION\");\n            const {searchSortByDirection,searchSortListDirection} = state;\n            const [sortDirectionItem] = searchSortListDirection.filter(item => item.value != searchSortByDirection);\n\n            return {\n                ...state,\n                searchSortByDirection:sortDirectionItem.value,\n                needToFetch:true\n            };\n        }\n        default:\n            return {\n                ...state,\n                error:new Error(`[STORE] action case '${action.case}' is unknown `)\n            };\n            // throw new Error(`[STORE] action case '${action.case}' is unknown `);\n    };\n}\n\nexport const Store = props => {\n    const [state, dispatch] = React.useReducer(\n        reducer,\n        props.context,\n        init\n    );\n    return (\n        <StoreContext.Provider value={{ state, dispatch }}>\n            {props.children}\n        </StoreContext.Provider>\n    );\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from 'components/App';\nimport * as serviceWorker from 'misc/serviceWorker';\n\nimport AjvError from \"components/Error/Ajv\";\nimport {contextValidator} from \"douane\";\nimport {Store} from \"components/Store\";\n\nconst widenPickerInterface = {\n    _context: {},\n    _data: [],\n\n    get context() {\n        return this._context;\n    },\n    get data(){\n        return this._data;\n    },\n\n    set context(contextData) {\n        this._context = contextData;\n    },\n\n    set data(data){\n        this._data = data;\n    },\n\n    load: function (values) {\n        console.log(values.d);\n        if (values.d !== undefined && Array.isArray(values.d)) {\n            widenPickerInterface.data = Array.from(values.d);\n        }\n    },\n\n    add: function (path, product) {\n        this.data = [...this.data,path];\n        return this.data;\n    },\n\n    remove: function (path) {\n        this.data = this.data.filter( item => !item.endsWith(path) );\n    },\n\n    removeAt: function (index) {\n        if(index !== -1) {\n            this.data = this.data.splice(index, 1);\n            return this.data;\n        }\n        return null;\n    },\n\n    removeAll: function () {\n        widenPickerInterface.data = [];\n    },\n\n    // get: function () {\n    //     return productPickerData.data;\n    // }\n\n};\n\nconst render = (target,context) =>{\n    try{\n        // console.log(\"context : \",JSON.stringify(context));\n        context = contextValidator(context);\n        const headers={};\n        // if(context.gql_authorization)\n        //     headers.Authorization=context.gql_authorization;\n\n        // const client = new ApolloClient({\n        //     uri:context.gql_endpoint,\n        //     headers\n        // })\n\n        ReactDOM.render(\n            <React.StrictMode>\n                <Store context={context}>\n                    {/*<ApolloProvider client={client}>*/}\n                        <App />\n                    {/*</ApolloProvider>*/}\n                </Store>\n            </React.StrictMode>,\n            document.getElementById(target)\n        );\n\n    }catch(e){\n        console.error(\"error : \",e);\n        //TODO create a generic error handler\n        ReactDOM.render(\n            <AjvError\n                item={e.item}\n                errors={e.errors}\n            />,\n            document.getElementById(target)\n        );\n    }\n\n    // ReactDOM.render(\n    //     <React.StrictMode>\n    //         <App />\n    //     </React.StrictMode>,\n    //     document.getElementById(target)\n    // );\n}\n\nwindow.widenPicker = render;\nwindow.widenPickerInterface = widenPickerInterface;\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/loader_4.a6ec563b.gif\";"],"sourceRoot":""}